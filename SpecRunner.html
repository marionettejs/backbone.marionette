<!doctype html>
<html>
  <head>
    <title>Marionette SpecRunner</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="node_modules/mocha/mocha.css" />
    <script src="node_modules/mocha/mocha.js"></script>

    <script src="node_modules/chai/chai.js"></script>
    <script src="node_modules/sinon/pkg/sinon.js"></script>
    <script src="node_modules/sinon-chai/lib/sinon-chai.js"></script>
    <script src="node_modules/chai-jq/chai-jq.js"></script>

    <script>
      mocha.setup('bdd');

      window.expect = chai.expect;
      window.sinon = sinon;

      onload = function() {
        mocha.checkLeaks();
        mocha.run();

        var $fixtures = $('#fixtures');

        var setFixtures = function () {
            _.each(arguments, function (content) {
                $fixtures.append(content);
            });
        };

        var clearFixtures = function () {
            $fixtures.empty();
        };

        var originalHash = window.location.hash;

        before(function() {
            this.setFixtures = setFixtures;
            this.clearFixtures = clearFixtures;

            this.checkProperties = function(block, blacklist) {
              blacklist = blacklist ? blacklist.push('cid') : 'cid';
              var props = _.partial(_.omit, _, blacklist);
              block.call(this, props);
            };
        });

        beforeEach(function() {
            this.sinon = sinon.sandbox.create();
        });

        afterEach(function() {
            this.sinon.restore();
            this.clearFixtures();
            window.location.hash = originalHash;
            Backbone.history.stop();
            Backbone.history.handlers.length = 0;
        });
      };
    </script>

    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script src="node_modules/underscore/underscore.js"></script>
    <script src="node_modules/backbone/backbone.js"></script>
    <script src="node_modules/backbone.babysitter/lib/backbone.babysitter.js"></script>
    <script src="node_modules/backbone.radio/build/backbone.radio.js"></script>
    <script src="node_modules/backbone-metal/dist/backbone-metal.js"></script>


    <script>
        window.Marionette = Backbone.Marionette = {};
        window.slice = Array.prototype.slice;
    </script>
    <script src="src/metal.js"></script>
    <script src="src/trigger-method.js"></script>
    <script src="src/bind-entity-events.js"></script>
    <script src="src/radio-helpers.js"></script>
    <script src="src/dom-refresh.js"></script>
    <script src="src/helpers.js"></script>
    <script src="src/error.js"></script>
    <script src="src/renderer.js"></script>
    <script src="src/template-cache.js"></script>
    <script src="src/object.js"></script>
    <script src="src/features.js"></script>
    <script src="src/abstract-view.js"></script>
    <script src="src/app-router.js"></script>
    <script src="src/application.js"></script>
    <script src="src/region.js"></script>
    <script src="src/region-manager.js"></script>
    <script src="src/behavior.js"></script>
    <script src="src/behaviors.js"></script>
    <script src="src/view.js"></script>
    <script src="src/collection-view.js"></script>
    <script src="src/composite-view.js"></script>

    <script src="test/unit/abstract-view.spec.js"></script>
    <script src="test/unit/app-router.spec.js"></script>
    <script src="test/unit/application.spec.js"></script>
    <script src="test/unit/behaviors.spec.js"></script>
    <script src="test/unit/bind-entity-events.spec.js"></script>
    <script src="test/unit/collection-view.empty-view.spec.js"></script>
    <script src="test/unit/collection-view.filter.spec.js"></script>
    <script src="test/unit/collection-view.item-view-options.spec.js"></script>
    <script src="test/unit/collection-view.reset.spec.js"></script>
    <script src="test/unit/collection-view.spec.js"></script>
    <script src="test/unit/composite-view.child-view-container.spec.js"></script>
    <script src="test/unit/composite-view.on-before-render.spec.js"></script>
    <script src="test/unit/composite-view.spec.js"></script>
    <script src="test/unit/destroying-views.spec.js"></script>
    <script src="test/unit/error.spec.js"></script>
    <script src="test/unit/features.spec.js"></script>
    <script src="test/unit/get-immediate-children.spec.js"></script>
    <script src="test/unit/get-nested-views.spec.js"></script>
    <script src="test/unit/get-option.spec.js"></script>
    <script src="test/unit/helpers.spec.js"></script>
    <script src="test/unit/merge-options.spec.js"></script>
    <script src="test/unit/mixin-underscore-collection.spec.js"></script>
    <script src="test/unit/normalize-methods.spec.js"></script>
    <script src="test/unit/normalize-ui.spec.js"></script>
    <script src="test/unit/object.spec.js"></script>
    <script src="test/unit/on-attach.spec.js"></script>
    <script src="test/unit/on-dom-refresh.spec.js"></script>
    <script src="test/unit/precompiled-template-rendering.spec.js"></script>
    <script src="test/unit/radio-helpers.spec.js"></script>
    <script src="test/unit/region-manager.spec.js"></script>
    <script src="test/unit/region.build-region.spec.js"></script>
    <script src="test/unit/region.spec.js"></script>
    <script src="test/unit/renderer.spec.js"></script>
    <script src="test/unit/sorted-views.spec.js"></script>
    <script src="test/unit/template-cache.spec.js"></script>
    <script src="test/unit/template-helpers.spec.js"></script>
    <script src="test/unit/trigger-method.spec.js"></script>
    <script src="test/unit/unbind-entity-events.spec.js"></script>
    <script src="test/unit/view.child-views.spec.js"></script>
    <script src="test/unit/view.dynamic-regions.spec.js"></script>
    <script src="test/unit/view.entity-events.spec.js"></script>
    <script src="test/unit/view.spec.js"></script>
    <script src="test/unit/view.triggers.spec.js"></script>
    <script src="test/unit/view.ui-bindings.spec.js"></script>
    <script src="test/unit/view.ui-event-and-triggers.spec.js"></script>

  </head>
  <body>
    <div id="mocha"></div>
    <div id="fixtures" hidden></div>
  </body>
</html>
