{"version":3,"file":"backbone.marionette.js","sources":["../src/utils/proxy.js","../src/utils/extend.js","../src/common/normalize-methods.js","../src/utils/error.js","../src/common/bind-events.js","../src/common/bind-requests.js","../src/common/get-option.js","../src/common/merge-options.js","../src/common/monitor-view-events.js","../src/common/trigger-method.js","../src/mixins/events.js","../src/mixins/common.js","../src/mixins/destroy.js","../src/mixins/radio.js","../src/object.js","../src/utils/invoke.js","../src/mixins/behaviors.js","../src/mixins/delegate-entity-events.js","../src/mixins/template-render.js","../src/utils/get-namespaced-event-name.js","../src/config/features.js","../src/mixins/triggers.js","../src/mixins/ui.js","../src/config/dom.js","../src/mixins/view.js","../src/common/view.js","../src/region.js","../src/common/build-region.js","../src/mixins/regions.js","../src/config/renderer.js","../src/view.js","../src/child-view-container.js","../src/collection-view.js","../src/behavior.js","../src/application.js","../src/backbone.marionette.js"],"sourcesContent":["//Internal utility for creating context style global utils\nconst proxy = function(method) {\n  return function(context, ...args) {\n    return method.apply(context, args);\n  };\n};\n\nexport default proxy;\n","// Marionette.extend\n// -----------------\n\nimport Backbone from 'backbone';\n\n// Borrow the Backbone `extend` method so we can use it as needed\nconst extend = Backbone.Model.extend;\n\nexport default extend;\n","import _ from 'underscore';\n\n// Marionette.normalizeMethods\n// ----------------------\n\n// Pass in a mapping of events => functions or function names\n// and return a mapping of events => functions\nconst normalizeMethods = function(hash) {\n  if (!hash) { return }\n\n  return _.reduce(hash, (normalizedHash, method, name) => {\n    if (!_.isFunction(method)) {\n      method = this[method];\n    }\n    if (method) {\n      normalizedHash[name] = method;\n    }\n    return normalizedHash;\n  }, {});\n};\n\nexport default normalizeMethods;\n","// Error\n// -----\n\nimport _ from 'underscore';\nimport extend from './extend';\nimport {version} from '../../package.json';\n\nconst errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number', 'url'];\n\nconst MarionetteError = extend.call(Error, {\n  urlRoot: `http://marionettejs.com/docs/v${version}/`,\n\n  url: '',\n\n  constructor(options) {\n    const error = Error.call(this, options.message);\n    _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));\n\n    if (Error.captureStackTrace) {\n      this.captureStackTrace();\n    }\n\n    this.url = this.urlRoot + this.url;\n  },\n\n  captureStackTrace() {\n    Error.captureStackTrace(this, MarionetteError);\n  },\n\n  toString() {\n    return `${ this.name }: ${ this.message } See: ${ this.url }`;\n  }\n});\n\nexport default MarionetteError;\n","// Bind Entity Events & Unbind Entity Events\n// -----------------------------------------\n//\n// These methods are used to bind/unbind a backbone \"entity\" (e.g. collection/model)\n// to methods on a target object.\n//\n// The first parameter, `target`, must have the Backbone.Events module mixed in.\n//\n// The second parameter is the `entity` (Backbone.Model, Backbone.Collection or\n// any object that has Backbone.Events mixed in) to bind the events from.\n//\n// The third parameter is a hash of { \"event:name\": \"eventHandler\" }\n// configuration. Multiple handlers can be separated by a space. A\n// function can be supplied instead of a string handler name.\n\nimport _ from 'underscore';\nimport normalizeMethods from './normalize-methods';\nimport MarionetteError from '../utils/error';\n\nfunction normalizeBindings(context, bindings) {\n  if (!_.isObject(bindings)) {\n    throw new MarionetteError({\n      message: 'Bindings must be an object.',\n      url: 'common.html#bindevents'\n    });\n  }\n\n  return normalizeMethods.call(context, bindings);\n}\n\nfunction bindEvents(entity, bindings) {\n  if (!entity || !bindings) { return this; }\n\n  this.listenTo(entity, normalizeBindings(this, bindings));\n\n  return this;\n}\n\nfunction unbindEvents(entity, bindings) {\n  if (!entity) { return this; }\n\n  if (!bindings) {\n    this.stopListening(entity);\n    return this;\n  }\n\n  this.stopListening(entity, normalizeBindings(this, bindings));\n\n  return this;\n}\n\n// Export Public API\nexport {\n  bindEvents,\n  unbindEvents\n};\n","// Bind/Unbind Radio Requests\n// -----------------------------------------\n//\n// These methods are used to bind/unbind a backbone.radio request\n// to methods on a target object.\n//\n// The first parameter, `target`, will set the context of the reply method\n//\n// The second parameter is the `Radio.channel` to bind the reply to.\n//\n// The third parameter is a hash of { \"request:name\": \"replyHandler\" }\n// configuration. A function can be supplied instead of a string handler name.\n\nimport _ from 'underscore';\nimport normalizeMethods from './normalize-methods';\nimport MarionetteError from '../utils/error';\n\nfunction normalizeBindings(context, bindings) {\n  if (!_.isObject(bindings)) {\n    throw new MarionetteError({\n      message: 'Bindings must be an object.',\n      url: 'common.html#bindrequests'\n    });\n  }\n\n  return normalizeMethods.call(context, bindings);\n}\n\nfunction bindRequests(channel, bindings) {\n  if (!channel || !bindings) { return this; }\n\n  channel.reply(normalizeBindings(this, bindings), this);\n\n  return this;\n}\n\nfunction unbindRequests(channel, bindings) {\n  if (!channel) { return this; }\n\n  if (!bindings) {\n    channel.stopReplying(null, null, this);\n    return this;\n  }\n\n  channel.stopReplying(normalizeBindings(this, bindings));\n\n  return this;\n}\n\nexport {\n  bindRequests,\n  unbindRequests\n};\n","// Marionette.getOption\n// --------------------\n\n// Retrieve an object, function or other value from the\n// object or its `options`, with `options` taking precedence.\nconst getOption = function(optionName) {\n  if (!optionName) { return; }\n  if (this.options && (this.options[optionName] !== undefined)) {\n    return this.options[optionName];\n  } else {\n    return this[optionName];\n  }\n};\n\nexport default getOption;\n","import _ from 'underscore';\n\n// Merge `keys` from `options` onto `this`\nconst mergeOptions = function(options, keys) {\n  if (!options) { return; }\n\n  _.each(keys, (key) => {\n    const option = options[key];\n    if (option !== undefined) {\n      this[key] = option;\n    }\n  });\n};\n\nexport default mergeOptions;\n","// DOM Refresh\n// -----------\n\nimport _ from 'underscore';\n\n// Trigger method on children unless a pure Backbone.View\nfunction triggerMethodChildren(view, event, shouldTrigger) {\n  if (!view._getImmediateChildren) { return; }\n  _.each(view._getImmediateChildren(), child => {\n    if (!shouldTrigger(child)) { return; }\n    child.triggerMethod(event, child);\n  });\n}\n\nfunction shouldTriggerAttach(view) {\n  return !view._isAttached;\n}\n\nfunction shouldAttach(view) {\n  if (!shouldTriggerAttach(view)) { return false; }\n  view._isAttached = true;\n  return true;\n}\n\nfunction shouldTriggerDetach(view) {\n  return view._isAttached;\n}\n\nfunction shouldDetach(view) {\n  view._isAttached = false;\n  return true;\n}\n\nfunction triggerDOMRefresh(view) {\n  if (view._isAttached && view._isRendered) {\n    view.triggerMethod('dom:refresh', view);\n  }\n}\n\nfunction triggerDOMRemove(view) {\n  if (view._isAttached && view._isRendered) {\n    view.triggerMethod('dom:remove', view);\n  }\n}\n\nfunction handleBeforeAttach() {\n  triggerMethodChildren(this, 'before:attach', shouldTriggerAttach);\n}\n\nfunction handleAttach() {\n  triggerMethodChildren(this, 'attach', shouldAttach);\n  triggerDOMRefresh(this);\n}\n\nfunction handleBeforeDetach() {\n  triggerMethodChildren(this, 'before:detach', shouldTriggerDetach);\n  triggerDOMRemove(this);\n}\n\nfunction handleDetach() {\n  triggerMethodChildren(this, 'detach', shouldDetach);\n}\n\nfunction handleBeforeRender() {\n  triggerDOMRemove(this);\n}\n\nfunction handleRender() {\n  triggerDOMRefresh(this);\n}\n\n// Monitor a view's state, propagating attach/detach events to children and firing dom:refresh\n// whenever a rendered view is attached or an attached view is rendered.\nfunction monitorViewEvents(view) {\n  if (view._areViewEventsMonitored || view.monitorViewEvents === false) { return; }\n\n  view._areViewEventsMonitored = true;\n\n  view.on({\n    'before:attach': handleBeforeAttach,\n    'attach': handleAttach,\n    'before:detach': handleBeforeDetach,\n    'detach': handleDetach,\n    'before:render': handleBeforeRender,\n    'render': handleRender\n  });\n}\n\nexport default monitorViewEvents;\n","// Trigger Method\n// --------------\n\nimport _ from 'underscore';\nimport getOption from './get-option';\n\n// split the event name on the \":\"\nconst splitter = /(^|:)(\\w)/gi;\n\n// Only calc getOnMethodName once\nconst methodCache = {};\n\n// take the event section (\"section1:section2:section3\")\n// and turn it in to uppercase name onSection1Section2Section3\nfunction getEventName(match, prefix, eventName) {\n  return eventName.toUpperCase();\n}\n\nconst getOnMethodName = function(event) {\n  if (!methodCache[event]) {\n    methodCache[event] = 'on' + event.replace(splitter, getEventName);\n  }\n\n  return methodCache[event];\n};\n\n// Trigger an event and/or a corresponding method name. Examples:\n//\n// `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\n// call the \"onFoo\" method.\n//\n// `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\n// call the \"onFooBar\" method.\nexport default function triggerMethod(event) {\n  // get the method name from the event name\n  const methodName = getOnMethodName(event);\n  const method = getOption.call(this, methodName);\n  let result;\n\n  // call the onMethodName if it exists\n  if (_.isFunction(method)) {\n    // pass all args, except the event name\n    result = method.apply(this, _.drop(arguments));\n  }\n\n  // trigger the event\n  this.trigger.apply(this, arguments);\n\n  return result;\n}\n","import triggerMethod from '../common/trigger-method';\n\nexport default {\n  triggerMethod\n}\n","import _ from 'underscore';\nimport Backbone from 'backbone';\n\nimport getOption from '../common/get-option';\nimport mergeOptions from '../common/merge-options';\nimport normalizeMethods from '../common/normalize-methods';\nimport triggerMethod from '../common/trigger-method';\nimport {\n  bindEvents,\n  unbindEvents\n} from '../common/bind-events';\nimport {\n  bindRequests,\n  unbindRequests\n} from '../common/bind-requests';\n\nconst CommonMixin = {\n\n  // Imports the \"normalizeMethods\" to transform hashes of\n  // events=>function references/names to a hash of events=>function references\n  normalizeMethods,\n\n  _setOptions(options, classOptions) {\n    this.options = _.extend({}, _.result(this, 'options'), options);\n    this.mergeOptions(options, classOptions);\n  },\n\n  // A handy way to merge passed-in options onto the instance\n  mergeOptions,\n\n  // Enable getting options from this or this.options by name.\n  getOption,\n\n  // Enable binding view's events from another entity.\n  bindEvents,\n\n  // Enable unbinding view's events from another entity.\n  unbindEvents,\n\n  // Enable binding view's requests.\n  bindRequests,\n\n  // Enable unbinding view's requests.\n  unbindRequests,\n\n  triggerMethod\n};\n\n_.extend(CommonMixin, Backbone.Events);\n\nexport default CommonMixin;\n","export default {\n  _isDestroyed: false,\n\n  isDestroyed() {\n    return this._isDestroyed;\n  },\n\n  destroy(options) {\n    if (this._isDestroyed) { return this; }\n\n    this.triggerMethod('before:destroy', this, options);\n    this._isDestroyed = true;\n    this.triggerMethod('destroy', this, options);\n    this.stopListening();\n\n    return this;\n  }\n};\n","import _ from 'underscore';\nimport Radio from 'backbone.radio';\nimport MarionetteError from '../utils/error';\n\n// MixinOptions\n// - channelName\n// - radioEvents\n// - radioRequests\n\nexport default {\n\n  _initRadio() {\n    const channelName = _.result(this, 'channelName');\n\n    if (!channelName) {\n      return;\n    }\n\n    /* istanbul ignore next */\n    if (!Radio) {\n      throw new MarionetteError({\n        message: 'The dependency \"backbone.radio\" is missing.',\n        url: 'backbone.radio.html#marionette-integration'\n      });\n    }\n\n    const channel = this._channel = Radio.channel(channelName);\n\n    const radioEvents = _.result(this, 'radioEvents');\n    this.bindEvents(channel, radioEvents);\n\n    const radioRequests = _.result(this, 'radioRequests');\n    this.bindRequests(channel, radioRequests);\n\n    this.on('destroy', this._destroyRadio);\n  },\n\n  _destroyRadio() {\n    this._channel.stopReplying(null, null, this);\n  },\n\n  getChannel() {\n    return this._channel;\n  }\n};\n","// Object\n// ------\n\nimport _ from 'underscore';\nimport extend from './utils/extend';\nimport CommonMixin from './mixins/common';\nimport DestroyMixin from './mixins/destroy';\nimport RadioMixin from './mixins/radio';\n\nconst ClassOptions = [\n  'channelName',\n  'radioEvents',\n  'radioRequests'\n];\n\n// Object borrows many conventions and utilities from Backbone.\nconst MarionetteObject = function(options) {\n  this._setOptions(options, ClassOptions);\n  this.cid = _.uniqueId(this.cidPrefix);\n  this._initRadio();\n  this.initialize.apply(this, arguments);\n};\n\nMarionetteObject.extend = extend;\n\n// Object Methods\n// --------------\n\n_.extend(MarionetteObject.prototype, CommonMixin, DestroyMixin, RadioMixin, {\n  cidPrefix: 'mno',\n\n  // This is a noop method intended to be overridden\n  initialize() {}\n});\n\nexport default MarionetteObject;\n","// Implementation of the invoke method (http://underscorejs.org/#invoke) with support for\n// lodash v3, v4, and underscore.js\nimport _ from 'underscore';\n\nexport default _.invokeMap || _.invoke;\n","import _ from 'underscore';\nimport MarionetteError from '../utils/error';\nimport _invoke from '../utils/invoke';\n\n// MixinOptions\n// - behaviors\n\n// Takes care of getting the behavior class\n// given options and a key.\n// If a user passes in options.behaviorClass\n// default to using that.\n// If a user passes in a Behavior Class directly, use that\n// Otherwise an error is thrown\nfunction getBehaviorClass(options) {\n  if (options.behaviorClass) {\n    return { BehaviorClass: options.behaviorClass, options };\n  }\n\n  //treat functions as a Behavior constructor\n  if (_.isFunction(options)) {\n    return { BehaviorClass: options, options: {} };\n  }\n\n  throw new MarionetteError({\n    message: 'Unable to get behavior class. A Behavior constructor should be passed directly or as behaviorClass property of options',\n    url: 'marionette.behavior.html#defining-and-attaching-behaviors'\n  });\n}\n\n// Iterate over the behaviors object, for each behavior\n// instantiate it and get its grouped behaviors.\n// This accepts a list of behaviors in either an object or array form\nfunction parseBehaviors(view, behaviors, allBehaviors) {\n  return _.reduce(behaviors, (reducedBehaviors, behaviorDefiniton) => {\n    const { BehaviorClass, options } = getBehaviorClass(behaviorDefiniton);\n    const behavior = new BehaviorClass(options, view);\n    reducedBehaviors.push(behavior);\n\n    return parseBehaviors(view, _.result(behavior, 'behaviors'), reducedBehaviors);\n  }, allBehaviors);\n}\n\nexport default {\n  _initBehaviors() {\n    this._behaviors = parseBehaviors(this, _.result(this, 'behaviors'), []);\n  },\n\n  _getBehaviorTriggers() {\n    const triggers = _invoke(this._behaviors, '_getTriggers');\n    return _.reduce(triggers, function(memo, _triggers) {\n      return _.extend(memo, _triggers);\n    }, {});\n  },\n\n  _getBehaviorEvents() {\n    const events = _invoke(this._behaviors, '_getEvents');\n    return _.reduce(events, function(memo, _events) {\n      return _.extend(memo, _events);\n    }, {});\n  },\n\n  // proxy behavior $el to the view's $el.\n  _proxyBehaviorViewProperties() {\n    _invoke(this._behaviors, 'proxyViewProperties');\n  },\n\n  // delegate modelEvents and collectionEvents\n  _delegateBehaviorEntityEvents() {\n    _invoke(this._behaviors, 'delegateEntityEvents');\n  },\n\n  // undelegate modelEvents and collectionEvents\n  _undelegateBehaviorEntityEvents() {\n    _invoke(this._behaviors, 'undelegateEntityEvents');\n  },\n\n  _destroyBehaviors(options) {\n    // Call destroy on each behavior after\n    // destroying the view.\n    // This unbinds event listeners\n    // that behaviors have registered for.\n    _invoke(this._behaviors, 'destroy', options);\n  },\n\n  // Remove a behavior\n  _removeBehavior(behavior) {\n    // Don't worry about the clean up if the view is destroyed\n    if (this._isDestroyed) { return; }\n\n    // Remove behavior-only triggers and events\n    this.undelegate(`.trig${ behavior.cid } .${ behavior.cid }`);\n\n    this._behaviors = _.without(this._behaviors, behavior);\n  },\n\n  _bindBehaviorUIElements() {\n    _invoke(this._behaviors, 'bindUIElements');\n  },\n\n  _unbindBehaviorUIElements() {\n    _invoke(this._behaviors, 'unbindUIElements');\n  },\n\n  _triggerEventOnBehaviors(eventName, view, options) {\n    _invoke(this._behaviors, 'triggerMethod', eventName, view, options);\n  }\n};\n","import _ from 'underscore';\n\n// MixinOptions\n// - collectionEvents\n// - modelEvents\n\nexport default {\n  // Handle `modelEvents`, and `collectionEvents` configuration\n  _delegateEntityEvents(model, collection) {\n    if (model) {\n      this._modelEvents = _.result(this, 'modelEvents');\n      this.bindEvents(model, this._modelEvents);\n    }\n\n    if (collection) {\n      this._collectionEvents = _.result(this, 'collectionEvents');\n      this.bindEvents(collection, this._collectionEvents);\n    }\n  },\n\n  // Remove any previously delegate entity events\n  _undelegateEntityEvents(model, collection) {\n    if (this._modelEvents) {\n      this.unbindEvents(model, this._modelEvents);\n      delete this._modelEvents;\n    }\n\n    if (this._collectionEvents) {\n      this.unbindEvents(collection, this._collectionEvents);\n      delete this._collectionEvents;\n    }\n  },\n\n  // Remove cached event handlers\n  _deleteEntityEventHandlers() {\n    delete this._modelEvents;\n    delete this._collectionEvents;\n  }\n};\n","import _ from 'underscore';\n\n// MixinOptions\n// - template\n// - templateContext\n\nexport default {\n\n  // Internal method to render the template with the serialized data\n  // and template context\n  _renderTemplate(template) {\n    // Add in entity data and template context\n    const data = this.mixinTemplateContext(this.serializeData()) || {};\n\n    // Render and add to el\n    const html = this._renderHtml(template, data);\n    if (typeof html !== 'undefined') {\n      this.attachElContent(html);\n    }\n  },\n\n  // Get the template for this view instance.\n  // You can set a `template` attribute in the view definition\n  // or pass a `template: TemplateFunction` parameter in\n  // to the constructor options.\n  getTemplate() {\n    return this.template;\n  },\n\n  // Mix in template context methods. Looks for a\n  // `templateContext` attribute, which can either be an\n  // object literal, or a function that returns an object\n  // literal. All methods and attributes from this object\n  // are copies to the object passed in.\n  mixinTemplateContext(serializedData) {\n    const templateContext = _.result(this, 'templateContext');\n    if (!templateContext) { return serializedData; }\n    if (!serializedData) { return templateContext; }\n    return _.extend({}, serializedData, templateContext);\n  },\n\n  // Serialize the view's model *or* collection, if\n  // it exists, for the template\n  serializeData() {\n    // If we have a model, we serialize that\n    if (this.model) {\n      return this.serializeModel();\n    }\n\n    // Otherwise, we serialize the collection,\n    // making it available under the `items` property\n    if (this.collection) {\n      return {\n        items: this.serializeCollection()\n      };\n    }\n  },\n\n  // Prepares the special `model` property of a view\n  // for being displayed in the template. Override this if\n  // you need a custom transformation for your view's model\n  serializeModel() {\n    return this.model.attributes;\n  },\n\n  // Serialize a collection\n  serializeCollection() {\n    return _.map(this.collection.models, model => model.attributes);\n  },\n\n  // Renders the data into the template\n  _renderHtml(template, data) {\n    return template(data);\n  },\n\n  // Attaches the content of a given view.\n  // This method can be overridden to optimize rendering,\n  // or to render in a non standard way.\n  //\n  // For example, using `innerHTML` instead of `$el.html`\n  //\n  // ```js\n  // attachElContent(html) {\n  //   this.el.innerHTML = html;\n  // }\n  // ```\n  attachElContent(html) {\n    this.Dom.setContents(this.el, html, this.$el);\n  }\n};\n","// Borrow event splitter from Backbone\nconst delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n// Set event name to be namespaced using a unique index\n// to generate a non colliding event namespace\n// http://api.jquery.com/event.namespace/\nconst getNamespacedEventName = function(eventName, namespace) {\n  const match = eventName.match(delegateEventSplitter);\n  return `${ match[1] }.${ namespace } ${ match[2] }`;\n};\n\nexport default getNamespacedEventName;\n","// Add Feature flags here\n// e.g. 'class' => false\nconst FEATURES = {\n  childViewEventPrefix: false,\n  triggersStopPropagation: true,\n  triggersPreventDefault: true,\n  DEV_MODE: false\n};\n\nfunction isEnabled(name) {\n  return !!FEATURES[name];\n}\n\nfunction setEnabled(name, state) {\n  return FEATURES[name] = state;\n}\n\nexport {\n  FEATURES,\n  setEnabled,\n  isEnabled\n};\n","import _ from 'underscore';\nimport getNamespacedEventName from '../utils/get-namespaced-event-name';\nimport { isEnabled } from '../config/features';\n\n// Internal method to create an event handler for a given `triggerDef` like\n// 'click:foo'\nfunction buildViewTrigger(view, triggerDef) {\n  if (_.isString(triggerDef)) {\n    triggerDef = {event: triggerDef};\n  }\n\n  const eventName = triggerDef.event;\n\n  let shouldPreventDefault = !!triggerDef.preventDefault;\n\n  if (isEnabled('triggersPreventDefault')) {\n    shouldPreventDefault = triggerDef.preventDefault !== false;\n  }\n\n  let shouldStopPropagation = !!triggerDef.stopPropagation;\n\n  if (isEnabled('triggersStopPropagation')) {\n    shouldStopPropagation = triggerDef.stopPropagation !== false;\n  }\n\n  return function(event, ...args) {\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n\n    if (shouldStopPropagation) {\n      event.stopPropagation();\n    }\n\n    view.triggerMethod(eventName, view, event, ...args);\n  };\n}\n\nexport default {\n\n  // Configure `triggers` to forward DOM events to view\n  // events. `triggers: {\"click .foo\": \"do:foo\"}`\n  _getViewTriggers(view, triggers) {\n    // Configure the triggers, prevent default\n    // action and stop propagation of DOM events\n    return _.reduce(triggers, (events, value, key) => {\n      key = getNamespacedEventName(key, `trig${ this.cid }`);\n      events[key] = buildViewTrigger(view, value);\n      return events;\n    }, {});\n  }\n\n};\n","import _ from 'underscore';\n// allows for the use of the @ui. syntax within\n// a given key for triggers and events\n// swaps the @ui with the associated selector.\n// Returns a new, non-mutated, parsed events hash.\nconst normalizeUIKeys = function(hash, ui) {\n  return _.reduce(hash, (memo, val, key) => {\n    const normalizedKey = normalizeUIString(key, ui);\n    memo[normalizedKey] = val;\n    return memo;\n  }, {});\n};\n\nconst uiRegEx = /@ui\\.[a-zA-Z-_$0-9]*/g;\n\n// utility method for parsing @ui. syntax strings\n// into associated selector\nconst normalizeUIString = function(uiString, ui) {\n  return uiString.replace(uiRegEx, (r) => {\n    return ui[r.slice(4)];\n  });\n};\n\n// allows for the use of the @ui. syntax within\n// a given value for regions\n// swaps the @ui with the associated selector\nconst normalizeUIValues = function(hash, ui, property) {\n  _.each(hash, (val, key) => {\n    if (_.isString(val)) {\n      hash[key] = normalizeUIString(val, ui);\n    } else if (val) {\n      const propertyVal = val[property];\n      if (_.isString(propertyVal)) {\n        val[property] = normalizeUIString(propertyVal, ui);\n      }\n    }\n  });\n  return hash;\n};\n\nexport default {\n\n  // normalize the keys of passed hash with the views `ui` selectors.\n  // `{\"@ui.foo\": \"bar\"}`\n  normalizeUIKeys(hash) {\n    const uiBindings = this._getUIBindings();\n    return normalizeUIKeys(hash, uiBindings);\n  },\n\n  // normalize the passed string with the views `ui` selectors.\n  // `\"@ui.bar\"`\n  normalizeUIString(uiString) {\n    const uiBindings = this._getUIBindings();\n    return normalizeUIString(uiString, uiBindings);\n  },\n\n  // normalize the values of passed hash with the views `ui` selectors.\n  // `{foo: \"@ui.bar\"}`\n  normalizeUIValues(hash, property) {\n    const uiBindings = this._getUIBindings();\n    return normalizeUIValues(hash, uiBindings, property);\n  },\n\n  _getUIBindings() {\n    const uiBindings = _.result(this, '_uiBindings');\n    return uiBindings || _.result(this, 'ui');\n  },\n\n  // This method binds the elements specified in the \"ui\" hash inside the view's code with\n  // the associated jQuery selectors.\n  _bindUIElements() {\n    if (!this.ui) { return; }\n\n    // store the ui hash in _uiBindings so they can be reset later\n    // and so re-rendering the view will be able to find the bindings\n    if (!this._uiBindings) {\n      this._uiBindings = this.ui;\n    }\n\n    // get the bindings result, as a function or otherwise\n    const bindings = _.result(this, '_uiBindings');\n\n    // empty the ui so we don't have anything to start with\n    this._ui = {};\n\n    // bind each of the selectors\n    _.each(bindings, (selector, key) => {\n      this._ui[key] = this.$(selector);\n    });\n\n    this.ui = this._ui;\n  },\n\n  _unbindUIElements() {\n    if (!this.ui || !this._uiBindings) { return; }\n\n    // delete all of the existing ui bindings\n    _.each(this.ui, ($el, name) => {\n      delete this.ui[name];\n    });\n\n    // reset the ui element to the original bindings configuration\n    this.ui = this._uiBindings;\n    delete this._uiBindings;\n    delete this._ui;\n  },\n\n  _getUI(name) {\n    return this._ui[name];\n  }\n};\n","// DomApi\n//  ---------\nimport _ from 'underscore';\nimport Backbone from 'backbone';\n\n// Performant method for returning the jQuery instance\nfunction getEl(el) {\n  return el instanceof Backbone.$ ? el : Backbone.$(el);\n}\n\n// Static setter\nexport function setDomApi(mixin) {\n  this.prototype.Dom = _.extend({}, this.prototype.Dom, mixin);\n  return this;\n}\n\nexport default {\n\n  // Returns a new HTML DOM node instance\n  createBuffer() {\n    return document.createDocumentFragment();\n  },\n\n  // Returns the document element for a given DOM element\n  getDocumentEl(el) {\n    return el.ownerDocument.documentElement;\n  },\n\n  // Lookup the `selector` string\n  // Selector may also be a DOM element\n  // Returns an array-like object of nodes\n  getEl(selector) {\n    return getEl(selector);\n  },\n\n  // Finds the `selector` string with the el\n  // Returns an array-like object of nodes\n  findEl(el, selector) {\n    return getEl(el).find(selector);\n  },\n\n  // Returns true if the el contains the node childEl\n  hasEl(el, childEl) {\n    return el.contains(childEl && childEl.parentNode);\n  },\n\n  // Detach `el` from the DOM without removing listeners\n  detachEl(el, _$el = getEl(el)) {\n    _$el.detach();\n  },\n\n  // Remove `oldEl` from the DOM and put `newEl` in its place\n  replaceEl(newEl, oldEl) {\n    if (newEl === oldEl) {\n      return;\n    }\n\n    const parent = oldEl.parentNode;\n\n    if (!parent) {\n      return;\n    }\n\n    parent.replaceChild(newEl, oldEl);\n  },\n\n  // Swaps the location of `el1` and `el2` in the DOM\n  swapEl(el1, el2) {\n    if (el1 === el2) {\n      return;\n    }\n\n    const parent1 = el1.parentNode;\n    const parent2 = el2.parentNode;\n\n    if (!parent1 || !parent2) {\n      return;\n    }\n\n    const next1 = el1.nextSibling;\n    const next2 = el2.nextSibling;\n\n    parent1.insertBefore(el2, next1);\n    parent2.insertBefore(el1, next2);\n  },\n\n  // Replace the contents of `el` with the HTML string of `html`\n  setContents(el, html, _$el = getEl(el)) {\n    _$el.html(html);\n  },\n\n  // Takes the DOM node `el` and appends the DOM node `contents`\n  // to the end of the element's contents.\n  appendContents(el, contents, {_$el = getEl(el), _$contents = getEl(contents)} = {}) {\n    _$el.append(_$contents);\n  },\n\n  // Does the el have child nodes\n  hasContents(el) {\n    return !!el && el.hasChildNodes();\n  },\n\n  // Remove the inner contents of `el` from the DOM while leaving\n  // `el` itself in the DOM.\n  detachContents(el, _$el = getEl(el)) {\n    _$el.contents().detach();\n  }\n};\n","// ViewMixin\n//  ---------\n\nimport Backbone from 'backbone';\nimport _ from 'underscore';\nimport BehaviorsMixin from './behaviors';\nimport CommonMixin from './common';\nimport DelegateEntityEventsMixin from './delegate-entity-events';\nimport TemplateRenderMixin from './template-render';\nimport TriggersMixin from './triggers';\nimport UIMixin from './ui';\nimport { isEnabled } from '../config/features';\nimport DomApi from '../config/dom';\n\n// MixinOptions\n// - behaviors\n// - childViewEventPrefix\n// - childViewEvents\n// - childViewTriggers\n// - collectionEvents\n// - modelEvents\n// - triggers\n// - ui\n\n\nconst ViewMixin = {\n  Dom: DomApi,\n\n  _isElAttached() {\n    return !!this.el && this.Dom.hasEl(this.Dom.getDocumentEl(this.el), this.el);\n  },\n\n  supportsRenderLifecycle: true,\n  supportsDestroyLifecycle: true,\n\n  _isDestroyed: false,\n\n  isDestroyed() {\n    return !!this._isDestroyed;\n  },\n\n  _isRendered: false,\n\n  isRendered() {\n    return !!this._isRendered;\n  },\n\n  _isAttached: false,\n\n  isAttached() {\n    return !!this._isAttached;\n  },\n\n  // Overriding Backbone.View's `delegateEvents` to handle\n  // `events` and `triggers`\n  delegateEvents(events) {\n    this._proxyBehaviorViewProperties();\n    this._buildEventProxies();\n\n    const combinedEvents = _.extend({},\n      this._getBehaviorEvents(),\n      this._getEvents(events),\n      this._getBehaviorTriggers(),\n      this._getTriggers()\n    );\n\n    Backbone.View.prototype.delegateEvents.call(this, combinedEvents);\n\n    return this;\n  },\n\n  // Allows Backbone.View events to utilize `@ui.` selectors\n  _getEvents(events) {\n    if (events) {\n      return this.normalizeUIKeys(events);\n    }\n\n    if (!this.events) { return; }\n\n    return this.normalizeUIKeys(_.result(this, 'events'));\n  },\n\n  // Configure `triggers` to forward DOM events to view\n  // events. `triggers: {\"click .foo\": \"do:foo\"}`\n  _getTriggers() {\n    if (!this.triggers) { return; }\n\n    // Allow `triggers` to be configured as a function\n    const triggers = this.normalizeUIKeys(_.result(this, 'triggers'));\n\n    // Configure the triggers, prevent default\n    // action and stop propagation of DOM events\n    return this._getViewTriggers(this, triggers);\n  },\n\n  // Handle `modelEvents`, and `collectionEvents` configuration\n  delegateEntityEvents() {\n    this._delegateEntityEvents(this.model, this.collection);\n\n    // bind each behaviors model and collection events\n    this._delegateBehaviorEntityEvents();\n\n    return this;\n  },\n\n  // Handle unbinding `modelEvents`, and `collectionEvents` configuration\n  undelegateEntityEvents() {\n    this._undelegateEntityEvents(this.model, this.collection);\n\n    // unbind each behaviors model and collection events\n    this._undelegateBehaviorEntityEvents();\n\n    return this;\n  },\n\n  // Handle destroying the view and its children.\n  destroy(options) {\n    if (this._isDestroyed || this._isDestroying) { return this; }\n    this._isDestroying = true;\n    const shouldTriggerDetach = this._isAttached && !this._disableDetachEvents;\n\n    this.triggerMethod('before:destroy', this, options);\n    if (shouldTriggerDetach) {\n      this.triggerMethod('before:detach', this);\n    }\n\n    // unbind UI elements\n    this.unbindUIElements();\n\n    // remove the view from the DOM\n    this._removeElement();\n\n    if (shouldTriggerDetach) {\n      this._isAttached = false;\n      this.triggerMethod('detach', this);\n    }\n\n    // remove children after the remove to prevent extra paints\n    this._removeChildren();\n\n    this._isDestroyed = true;\n    this._isRendered = false;\n\n    // Destroy behaviors after _isDestroyed flag\n    this._destroyBehaviors(options);\n\n    this._deleteEntityEventHandlers();\n\n    this.triggerMethod('destroy', this, options);\n    this._triggerEventOnBehaviors('destroy', this, options);\n\n    this.stopListening();\n\n    return this;\n  },\n\n  // Equates to this.$el.remove\n  _removeElement() {\n    this.$el.off().removeData();\n    this.Dom.detachEl(this.el, this.$el);\n  },\n\n  // This method binds the elements specified in the \"ui\" hash\n  bindUIElements() {\n    this._bindUIElements();\n    this._bindBehaviorUIElements();\n\n    return this;\n  },\n\n  // This method unbinds the elements specified in the \"ui\" hash\n  unbindUIElements() {\n    this._unbindUIElements();\n    this._unbindBehaviorUIElements();\n\n    return this;\n  },\n\n  getUI(name) {\n    return this._getUI(name);\n  },\n\n  // Cache `childViewEvents` and `childViewTriggers`\n  _buildEventProxies() {\n    this._childViewEvents = this.normalizeMethods(_.result(this, 'childViewEvents'));\n    this._childViewTriggers = _.result(this, 'childViewTriggers');\n    this._eventPrefix = this._getEventPrefix();\n  },\n\n  _getEventPrefix() {\n    const defaultPrefix = isEnabled('childViewEventPrefix') ? 'childview' : false;\n    const prefix = _.result(this, 'childViewEventPrefix', defaultPrefix);\n\n    return (prefix === false) ? prefix : prefix + ':';\n  },\n\n  _proxyChildViewEvents(view) {\n    if (this._childViewEvents || this._childViewTriggers || this._eventPrefix) {\n      this.listenTo(view, 'all', this._childViewEventHandler);\n    }\n  },\n\n  _childViewEventHandler(eventName, ...args) {\n    const childViewEvents = this._childViewEvents;\n\n    // call collectionView childViewEvent if defined\n    if (childViewEvents && childViewEvents[eventName]) {\n      childViewEvents[eventName].apply(this, args);\n    }\n\n    // use the parent view's proxyEvent handlers\n    const childViewTriggers = this._childViewTriggers;\n\n    // Call the event with the proxy name on the parent layout\n    if (childViewTriggers && childViewTriggers[eventName]) {\n      this.triggerMethod(childViewTriggers[eventName], ...args);\n    }\n\n    if (this._eventPrefix) {\n      this.triggerMethod(this._eventPrefix + eventName, ...args);\n    }\n  }\n};\n\n_.extend(ViewMixin, BehaviorsMixin, CommonMixin, DelegateEntityEventsMixin, TemplateRenderMixin, TriggersMixin, UIMixin);\n\nexport default ViewMixin;\n","export function renderView(view) {\n  if (view._isRendered) {\n    return;\n  }\n\n  if (!view.supportsRenderLifecycle) {\n    view.triggerMethod('before:render', view);\n  }\n\n  view.render();\n  view._isRendered = true;\n\n  if (!view.supportsRenderLifecycle) {\n    view.triggerMethod('render', view);\n  }\n}\n\nexport function destroyView(view, disableDetachEvents) {\n  if (view.destroy) {\n    // Attach flag for public destroy function internal check\n    view._disableDetachEvents = disableDetachEvents;\n    view.destroy();\n    return;\n  }\n\n  // Destroy for non-Marionette Views\n  if (!view.supportsDestroyLifecycle) {\n    view.triggerMethod('before:destroy', view);\n  }\n\n  const shouldTriggerDetach = view._isAttached && !disableDetachEvents;\n\n  if (shouldTriggerDetach) {\n    view.triggerMethod('before:detach', view);\n  }\n\n  view.remove();\n\n  if (shouldTriggerDetach) {\n    view._isAttached = false;\n    view.triggerMethod('detach', view);\n  }\n\n  view._isDestroyed = true;\n\n  if (!view.supportsDestroyLifecycle) {\n    view.triggerMethod('destroy', view);\n  }\n}\n","// Region\n// ------\n\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport MarionetteError from './utils/error';\nimport extend from './utils/extend';\nimport monitorViewEvents from './common/monitor-view-events';\nimport { renderView, destroyView } from './common/view';\nimport CommonMixin from './mixins/common';\nimport View from './view';\nimport DomApi, { setDomApi } from './config/dom';\n\nconst classErrorName = 'RegionError';\n\nconst ClassOptions = [\n  'allowMissingEl',\n  'parentEl',\n  'replaceElement'\n];\n\nconst Region = function(options) {\n  this._setOptions(options, ClassOptions);\n\n  this.cid = _.uniqueId(this.cidPrefix);\n\n  // getOption necessary because options.el may be passed as undefined\n  this._initEl = this.el = this.getOption('el');\n\n  // Handle when this.el is passed in as a $ wrapped element.\n  this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;\n\n  this.$el = this._getEl(this.el);\n\n  this.initialize.apply(this, arguments);\n};\n\nRegion.extend = extend;\nRegion.setDomApi = setDomApi;\n\n// Region Methods\n// --------------\n\n_.extend(Region.prototype, CommonMixin, {\n  Dom: DomApi,\n\n  cidPrefix: 'mnr',\n  replaceElement: false,\n  _isReplaced: false,\n  _isSwappingView: false,\n\n  // This is a noop method intended to be overridden\n  initialize() {},\n\n  // Displays a view instance inside of the region. If necessary handles calling the `render`\n  // method for you. Reads content directly from the `el` attribute.\n  show(view, options) {\n    if (!this._ensureElement(options)) {\n      return;\n    }\n\n    view = this._getView(view, options);\n\n    if (view === this.currentView) { return this; }\n\n    if (view._isShown) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'View is already shown in a Region or CollectionView',\n        url: 'marionette.region.html#showing-a-view'\n      });\n    }\n\n    this._isSwappingView = !!this.currentView;\n\n    this.triggerMethod('before:show', this, view, options);\n\n    // Assume an attached view is already in the region for pre-existing DOM\n    if (this.currentView || !view._isAttached) {\n      this.empty(options);\n    }\n\n    this._setupChildView(view);\n\n    this.currentView = view;\n\n    renderView(view);\n\n    this._attachView(view, options);\n\n    this.triggerMethod('show', this, view, options);\n\n    this._isSwappingView = false;\n\n    return this;\n  },\n\n  _getEl(el) {\n    if (!el) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'An \"el\" must be specified for a region.',\n        url: 'marionette.region.html#additional-options'\n      });\n    }\n\n    return this.getEl(el);\n  },\n\n  _setEl() {\n    this.$el = this._getEl(this.el);\n\n    if (this.$el.length) {\n      this.el = this.$el[0];\n    }\n\n    // Make sure the $el contains only the el\n    if (this.$el.length > 1) {\n      this.$el = this.Dom.getEl(this.el);\n    }\n  },\n\n  // Set the `el` of the region and move any current view to the new `el`.\n  _setElement(el) {\n    if (el === this.el) { return this; }\n\n    const shouldReplace = this._isReplaced;\n\n    this._restoreEl();\n\n    this.el = el;\n\n    this._setEl();\n\n    if (this.currentView) {\n      const view = this.currentView;\n\n      if (shouldReplace) {\n        this._replaceEl(view);\n      } else {\n        this.attachHtml(view);\n      }\n    }\n\n    return this;\n  },\n\n  _setupChildView(view) {\n    monitorViewEvents(view);\n\n    this._proxyChildViewEvents(view);\n\n    // We need to listen for if a view is destroyed in a way other than through the region.\n    // If this happens we need to remove the reference to the currentView since once a view\n    // has been destroyed we can not reuse it.\n    view.on('destroy', this._empty, this);\n  },\n\n  _proxyChildViewEvents(view) {\n    const parentView = this._parentView;\n\n    if (!parentView) { return; }\n\n    parentView._proxyChildViewEvents(view);\n  },\n\n  // If the regions parent view is not monitoring its attach/detach events\n  _shouldDisableMonitoring() {\n    return this._parentView && this._parentView.monitorViewEvents === false;\n  },\n\n  _isElAttached() {\n    return this.Dom.hasEl(this.Dom.getDocumentEl(this.el), this.el);\n  },\n\n  _attachView(view, { replaceElement } = {}) {\n    const shouldTriggerAttach = !view._isAttached && this._isElAttached() && !this._shouldDisableMonitoring();\n    const shouldReplaceEl = typeof replaceElement === 'undefined' ? !!_.result(this, 'replaceElement') : !!replaceElement;\n\n    if (shouldTriggerAttach) {\n      view.triggerMethod('before:attach', view);\n    }\n\n    if (shouldReplaceEl) {\n      this._replaceEl(view);\n    } else {\n      this.attachHtml(view);\n    }\n\n    if (shouldTriggerAttach) {\n      view._isAttached = true;\n      view.triggerMethod('attach', view);\n    }\n\n    // Corresponds that view is shown in a marionette Region or CollectionView\n    view._isShown = true;\n  },\n\n  _ensureElement(options = {}) {\n    if (!_.isObject(this.el)) {\n      this._setEl();\n    }\n\n    if (!this.$el || this.$el.length === 0) {\n      const allowMissingEl = typeof options.allowMissingEl === 'undefined' ? !!_.result(this, 'allowMissingEl') : !!options.allowMissingEl;\n\n      if (allowMissingEl) {\n        return false;\n      } else {\n        throw new MarionetteError({\n          name: classErrorName,\n          message: `An \"el\" must exist in DOM for this region ${this.cid}`,\n          url: 'marionette.region.html#additional-options'\n        });\n      }\n    }\n    return true;\n  },\n\n  _getView(view) {\n    if (!view) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.',\n        url: 'marionette.region.html#showing-a-view'\n      });\n    }\n\n    if (view._isDestroyed) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: `View (cid: \"${view.cid}\") has already been destroyed and cannot be used.`,\n        url: 'marionette.region.html#showing-a-view'\n      });\n    }\n\n    if (view instanceof Backbone.View) {\n      return view;\n    }\n\n    const viewOptions = this._getViewOptions(view);\n\n    return new View(viewOptions);\n  },\n\n  // This allows for a template or a static string to be\n  // used as a template\n  _getViewOptions(viewOptions) {\n    if (_.isFunction(viewOptions)) {\n      return { template: viewOptions };\n    }\n\n    if (_.isObject(viewOptions)) {\n      return viewOptions;\n    }\n\n    const template = function() { return viewOptions; };\n\n    return { template };\n  },\n\n  // Override this method to change how the region finds the DOM element that it manages. Return\n  // a jQuery selector object scoped to a provided parent el or the document if none exists.\n  getEl(el) {\n    const context = _.result(this, 'parentEl');\n\n    if (context && _.isString(el)) {\n      return this.Dom.findEl(context, el);\n    }\n\n    return this.Dom.getEl(el);\n  },\n\n  _replaceEl(view) {\n    // Always restore the el to ensure the regions el is present before replacing\n    this._restoreEl();\n\n    view.on('before:destroy', this._restoreEl, this);\n\n    this.Dom.replaceEl(view.el, this.el);\n\n    this._isReplaced = true;\n  },\n\n  // Restore the region's element in the DOM.\n  _restoreEl() {\n    // There is nothing to replace\n    if (!this._isReplaced) {\n      return;\n    }\n\n    const view = this.currentView;\n\n    if (!view) {\n      return;\n    }\n\n    this._detachView(view);\n\n    this._isReplaced = false;\n  },\n\n  // Check to see if the region's el was replaced.\n  isReplaced() {\n    return !!this._isReplaced;\n  },\n\n  // Check to see if a view is being swapped by another\n  isSwappingView() {\n    return !!this._isSwappingView;\n  },\n\n  // Override this method to change how the new view is appended to the `$el` that the\n  // region is managing\n  attachHtml(view) {\n    this.Dom.appendContents(this.el, view.el, {_$el: this.$el, _$contents: view.$el});\n  },\n\n  // Destroy the current view, if there is one. If there is no current view,\n  // it will detach any html inside the region's `el`.\n  empty(options = { allowMissingEl: true }) {\n    const view = this.currentView;\n\n    // If there is no view in the region we should only detach current html\n    if (!view) {\n      if (this._ensureElement(options)) {\n        this.detachHtml();\n      }\n      return this;\n    }\n\n    this._empty(view, true);\n    return this;\n  },\n\n  _empty(view, shouldDestroy) {\n    view.off('destroy', this._empty, this);\n    this.triggerMethod('before:empty', this, view);\n\n    this._restoreEl();\n\n    delete this.currentView;\n\n    if (!view._isDestroyed) {\n      if (shouldDestroy) {\n        this.removeView(view);\n      } else {\n        this._detachView(view);\n      }\n      view._isShown = false;\n      this._stopChildViewEvents(view);\n    }\n\n    this.triggerMethod('empty', this, view);\n  },\n\n  _stopChildViewEvents(view) {\n    const parentView = this._parentView;\n\n    if (!parentView) { return; }\n\n    this._parentView.stopListening(view);\n  },\n\n  // Non-Marionette safe view.destroy\n  destroyView(view) {\n    if (view._isDestroyed) {\n      return view;\n    }\n\n    destroyView(view, this._shouldDisableMonitoring());\n    return view;\n  },\n\n  // Override this method to determine what happens when the view\n  // is removed from the region when the view is not being detached\n  removeView(view) {\n    this.destroyView(view);\n  },\n\n  // Empties the Region without destroying the view\n  // Returns the detached view\n  detachView() {\n    const view = this.currentView;\n\n    if (!view) {\n      return;\n    }\n\n    this._empty(view);\n\n    return view;\n  },\n\n  _detachView(view) {\n    const shouldTriggerDetach = view._isAttached && !this._shouldDisableMonitoring();\n    const shouldRestoreEl = this._isReplaced;\n    if (shouldTriggerDetach) {\n      view.triggerMethod('before:detach', view);\n    }\n\n    if (shouldRestoreEl) {\n      this.Dom.replaceEl(this.el, view.el);\n    } else {\n      this.detachHtml();\n    }\n\n    if (shouldTriggerDetach) {\n      view._isAttached = false;\n      view.triggerMethod('detach', view);\n    }\n  },\n\n  // Override this method to change how the region detaches current content\n  detachHtml() {\n    this.Dom.detachContents(this.el, this.$el);\n  },\n\n  // Checks whether a view is currently present within the region. Returns `true` if there is\n  // and `false` if no view is present.\n  hasView() {\n    return !!this.currentView;\n  },\n\n  // Reset the region by destroying any existing view and clearing out the cached `$el`.\n  // The next time a view is shown via this region, the region will re-query the DOM for\n  // the region's `el`.\n  reset(options) {\n    this.empty(options);\n\n    this.el = this._initEl;\n\n    delete this.$el;\n    return this;\n  },\n\n  _isDestroyed: false,\n\n  isDestroyed() {\n    return this._isDestroyed;\n  },\n\n  // Destroy the region, remove any child view\n  // and remove the region from any associated view\n  destroy(options) {\n    if (this._isDestroyed) { return this; }\n\n    this.triggerMethod('before:destroy', this, options);\n    this._isDestroyed = true;\n\n    this.reset(options);\n\n    if (this._name) {\n      this._parentView._removeReferences(this._name);\n    }\n    delete this._parentView;\n    delete this._name;\n\n    this.triggerMethod('destroy', this, options);\n    this.stopListening();\n\n    return this;\n  }\n});\n\nexport default Region;\n","import _ from 'underscore';\nimport MarionetteError from '../utils/error';\nimport Region from '../region';\n\n// return the region instance from the definition\nexport default function(definition, defaults) {\n  if (definition instanceof Region) {\n    return definition;\n  }\n\n  if (_.isString(definition)) {\n    return buildRegionFromObject(defaults, { el: definition });\n  }\n\n  if (_.isFunction(definition)) {\n    return buildRegionFromObject(defaults, { regionClass: definition });\n  }\n\n  if (_.isObject(definition)) {\n    return buildRegionFromObject(defaults, definition);\n  }\n\n  throw new MarionetteError({\n    message: 'Improper region configuration type.',\n    url: 'marionette.region.html#defining-regions'\n  });\n}\n\nfunction buildRegionFromObject(defaults, definition) {\n  const options = _.extend({}, defaults, definition);\n\n  const RegionClass = options.regionClass\n\n  delete options.regionClass;\n\n  return new RegionClass(options);\n}\n","import _ from 'underscore';\nimport _invoke from '../utils/invoke';\nimport buildRegion from '../common/build-region';\nimport Region from '../region';\n\n// MixinOptions\n// - regions\n// - regionClass\n\nexport default {\n  regionClass: Region,\n\n  // Internal method to initialize the regions that have been defined in a\n  // `regions` attribute on this View.\n  _initRegions() {\n\n    // init regions hash\n    this.regions = this.regions || {};\n    this._regions = {};\n\n    this.addRegions(_.result(this, 'regions'));\n  },\n\n  // Internal method to re-initialize all of the regions by updating\n  // the `el` that they point to\n  _reInitRegions() {\n    _invoke(this._regions, 'reset');\n  },\n\n  // Add a single region, by name, to the View\n  addRegion(name, definition) {\n    const regions = {};\n    regions[name] = definition;\n    return this.addRegions(regions)[name];\n  },\n\n  // Add multiple regions as a {name: definition, name2: def2} object literal\n  addRegions(regions) {\n    // If there's nothing to add, stop here.\n    if (_.isEmpty(regions)) {\n      return;\n    }\n\n    // Normalize region selectors hash to allow\n    // a user to use the @ui. syntax.\n    regions = this.normalizeUIValues(regions, 'el');\n\n    // Add the regions definitions to the regions property\n    this.regions = _.extend({}, this.regions, regions);\n\n    return this._addRegions(regions);\n  },\n\n  // internal method to build and add regions\n  _addRegions(regionDefinitions) {\n    const defaults = {\n      regionClass: this.regionClass,\n      parentEl: _.partial(_.result, this, 'el')\n    };\n\n    return _.reduce(regionDefinitions, (regions, definition, name) => {\n      regions[name] = buildRegion(definition, defaults);\n      this._addRegion(regions[name], name);\n      return regions;\n    }, {});\n  },\n\n  _addRegion(region, name) {\n    this.triggerMethod('before:add:region', this, name, region);\n\n    region._parentView = this;\n    region._name = name;\n\n    this._regions[name] = region;\n\n    this.triggerMethod('add:region', this, name, region);\n  },\n\n  // Remove a single region from the View, by name\n  removeRegion(name) {\n    const region = this._regions[name];\n\n    this._removeRegion(region, name);\n\n    return region;\n  },\n\n  // Remove all regions from the View\n  removeRegions() {\n    const regions = this._getRegions();\n\n    _.each(this._regions, this._removeRegion.bind(this));\n\n    return regions;\n  },\n\n  _removeRegion(region, name) {\n    this.triggerMethod('before:remove:region', this, name, region);\n\n    region.destroy();\n\n    this.triggerMethod('remove:region', this, name, region);\n  },\n\n  // Called in a region's destroy\n  _removeReferences(name) {\n    delete this.regions[name];\n    delete this._regions[name];\n  },\n\n  // Empty all regions in the region manager, but\n  // leave them attached\n  emptyRegions() {\n    const regions = this.getRegions();\n    _invoke(regions, 'empty');\n    return regions;\n  },\n\n  // Checks to see if view contains region\n  // Accepts the region name\n  // hasRegion('main')\n  hasRegion(name) {\n    return !!this.getRegion(name);\n  },\n\n  // Provides access to regions\n  // Accepts the region name\n  // getRegion('main')\n  getRegion(name) {\n    if (!this._isRendered) {\n      this.render();\n    }\n    return this._regions[name];\n  },\n\n  _getRegions() {\n    return _.clone(this._regions);\n  },\n\n  // Get all regions\n  getRegions() {\n    if (!this._isRendered) {\n      this.render();\n    }\n    return this._getRegions();\n  },\n\n  showChildView(name, view, options) {\n    const region = this.getRegion(name);\n    region.show(view, options);\n    return view;\n  },\n\n  detachChildView(name) {\n    return this.getRegion(name).detachView();\n  },\n\n  getChildView(name) {\n    return this.getRegion(name).currentView;\n  }\n\n};\n","// Static setter for the renderer\nexport function setRenderer(renderer) {\n  this.prototype._renderHtml = renderer;\n  return this;\n}\n","// View\n// ---------\n\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport monitorViewEvents from './common/monitor-view-events';\nimport ViewMixin from './mixins/view';\nimport RegionsMixin from './mixins/regions';\nimport { setDomApi } from './config/dom';\nimport { setRenderer } from './config/renderer';\n\nconst ClassOptions = [\n  'behaviors',\n  'childViewEventPrefix',\n  'childViewEvents',\n  'childViewTriggers',\n  'collectionEvents',\n  'events',\n  'modelEvents',\n  'regionClass',\n  'regions',\n  'template',\n  'templateContext',\n  'triggers',\n  'ui'\n];\n\n// Used by _getImmediateChildren\nfunction childReducer(children, region) {\n  if (region.currentView) {\n    children.push(region.currentView);\n  }\n\n  return children;\n}\n\n// The standard view. Includes view events, automatic rendering\n// templates, nested views, and more.\nconst View = Backbone.View.extend({\n\n  constructor(options) {\n    this._setOptions(options, ClassOptions);\n\n    monitorViewEvents(this);\n\n    this._initBehaviors();\n    this._initRegions();\n\n    Backbone.View.prototype.constructor.apply(this, arguments);\n\n    this.delegateEntityEvents();\n\n    this._triggerEventOnBehaviors('initialize', this, options);\n  },\n\n  // Overriding Backbone.View's `setElement` to handle\n  // if an el was previously defined. If so, the view might be\n  // rendered or attached on setElement.\n  setElement() {\n    Backbone.View.prototype.setElement.apply(this, arguments);\n\n    this._isRendered = this.Dom.hasContents(this.el);\n    this._isAttached = this._isElAttached();\n\n    if (this._isRendered) {\n      this.bindUIElements();\n    }\n\n    return this;\n  },\n\n  // If a template is available, renders it into the view's `el`\n  // Re-inits regions and binds UI.\n  render() {\n    const template = this.getTemplate();\n\n    if (template === false || this._isDestroyed) { return this; }\n\n    this.triggerMethod('before:render', this);\n\n    // If this is not the first render call, then we need to\n    // re-initialize the `el` for each region\n    if (this._isRendered) {\n      this._reInitRegions();\n    }\n\n    this._renderTemplate(template);\n    this.bindUIElements();\n\n    this._isRendered = true;\n    this.triggerMethod('render', this);\n\n    return this;\n  },\n\n  // called by ViewMixin destroy\n  _removeChildren() {\n    this.removeRegions();\n  },\n\n  _getImmediateChildren() {\n    return _.reduce(this._regions, childReducer, []);\n  }\n}, {\n  setRenderer,\n  setDomApi\n});\n\n_.extend(View.prototype, ViewMixin, RegionsMixin);\n\nexport default View;\n","import _ from 'underscore';\n\n// Provide a container to store, retrieve and\n// shut down child views.\nconst Container = function() {\n  this._init();\n};\n\n// Mix in methods from Underscore, for iteration, and other\n// collection related features.\n// Borrowing this code from Backbone.Collection:\n// https://github.com/jashkenas/backbone/blob/1.1.2/backbone.js#L962\nconst methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n  'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n  'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n  'last', 'without', 'isEmpty', 'pluck', 'reduce', 'partition'];\n\n_.each(methods, function(method) {\n  Container.prototype[method] = function(...args) {\n    return _[method].apply(_, [this._views].concat(args));\n  };\n});\n\nfunction stringComparator(comparator, view) {\n  return view.model && view.model.get(comparator);\n}\n\n// Container Methods\n// -----------------\n\n_.extend(Container.prototype, {\n\n  // Initializes an empty container\n  _init() {\n    this._views = [];\n    this._viewsByCid = {};\n    this._indexByModel = {};\n    this._updateLength();\n  },\n\n  // Add a view to this container. Stores the view\n  // by `cid` and makes it searchable by the model\n  // cid (and model itself). Additionally it stores\n  // the view by index in the _views array\n  _add(view, index = this._views.length) {\n    this._addViewIndexes(view);\n\n    // add to end by default\n    this._views.splice(index, 0, view);\n\n    this._updateLength();\n  },\n\n  _addViewIndexes(view) {\n    // store the view\n    this._viewsByCid[view.cid] = view;\n\n    // index it by model\n    if (view.model) {\n      this._indexByModel[view.model.cid] = view;\n    }\n  },\n\n  // Sort (mutate) and return the array of the child views.\n  _sort(comparator, context) {\n    if (typeof comparator === 'string') {\n      comparator = _.partial(stringComparator, comparator);\n      return this._sortBy(comparator);\n    }\n\n    if (comparator.length === 1) {\n      return this._sortBy(comparator.bind(context));\n    }\n\n    return this._views.sort(comparator.bind(context));\n  },\n\n  // Makes `_.sortBy` mutate the array to match `this._views.sort`\n  _sortBy(comparator) {\n    const sortedViews = _.sortBy(this._views, comparator);\n\n    this._set(sortedViews);\n\n    return sortedViews;\n  },\n\n  // Replace array contents without overwriting the reference.\n  // Should not add/remove views\n  _set(views, shouldReset) {\n    this._views.length = 0;\n\n    this._views.push.apply(this._views, views.slice(0));\n\n    if (shouldReset) {\n      this._viewsByCid = {};\n      this._indexByModel = {};\n\n      _.each(views, this._addViewIndexes.bind(this));\n\n      this._updateLength();\n    }\n  },\n\n  // Swap views by index\n  _swap(view1, view2) {\n    const view1Index = this.findIndexByView(view1);\n    const view2Index = this.findIndexByView(view2);\n\n    if (view1Index === -1 || view2Index === -1) {\n      return;\n    }\n\n    const swapView = this._views[view1Index];\n    this._views[view1Index] = this._views[view2Index];\n    this._views[view2Index] = swapView;\n  },\n\n  // Find a view by the model that was attached to it.\n  // Uses the model's `cid` to find it.\n  findByModel(model) {\n    return this.findByModelCid(model.cid);\n  },\n\n  // Find a view by the `cid` of the model that was attached to it.\n  findByModelCid(modelCid) {\n    return this._indexByModel[modelCid];\n  },\n\n  // Find a view by index.\n  findByIndex(index) {\n    return this._views[index];\n  },\n\n  // Find the index of a view instance\n  findIndexByView(view) {\n    return this._views.indexOf(view);\n  },\n\n  // Retrieve a view by its `cid` directly\n  findByCid(cid) {\n    return this._viewsByCid[cid];\n  },\n\n  hasView(view) {\n    return !!this.findByCid(view.cid);\n  },\n\n  // Remove a view and clean up index references.\n  _remove(view) {\n    if (!this._viewsByCid[view.cid]) {\n      return;\n    }\n\n    // delete model index\n    if (view.model) {\n      delete this._indexByModel[view.model.cid];\n    }\n\n    // remove the view from the container\n    delete this._viewsByCid[view.cid];\n\n    const index = this.findIndexByView(view);\n    this._views.splice(index, 1);\n\n    this._updateLength();\n  },\n\n  // Update the `.length` attribute on this container\n  _updateLength() {\n    this.length = this._views.length;\n  }\n});\n\nexport default Container;\n","// Collection View\n// ---------------\n\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport MarionetteError from './utils/error';\nimport { renderView, destroyView } from './common/view';\nimport monitorViewEvents from './common/monitor-view-events';\nimport ChildViewContainer from './child-view-container';\nimport Region from './region';\nimport ViewMixin from './mixins/view';\nimport { setDomApi } from './config/dom';\nimport { setRenderer } from './config/renderer';\n\nconst classErrorName = 'CollectionViewError';\n\nconst ClassOptions = [\n  'behaviors',\n  'childView',\n  'childViewContainer',\n  'childViewEventPrefix',\n  'childViewEvents',\n  'childViewOptions',\n  'childViewTriggers',\n  'collectionEvents',\n  'emptyView',\n  'emptyViewOptions',\n  'events',\n  'modelEvents',\n  'sortWithCollection',\n  'template',\n  'templateContext',\n  'triggers',\n  'ui',\n  'viewComparator',\n  'viewFilter'\n];\n\n// A view that iterates over a Backbone.Collection\n// and renders an individual child view for each model.\nconst CollectionView = Backbone.View.extend({\n  // flag for maintaining the sorted order of the collection\n  sortWithCollection: true,\n\n  // constructor\n  constructor(options) {\n    this._setOptions(options, ClassOptions);\n\n    monitorViewEvents(this);\n\n    this._initChildViewStorage();\n    this._initBehaviors();\n\n    Backbone.View.prototype.constructor.apply(this, arguments);\n\n    // Init empty region\n    this.getEmptyRegion();\n\n    this.delegateEntityEvents();\n\n    this._triggerEventOnBehaviors('initialize', this, options);\n  },\n\n  // Internal method to set up the `children` object for storing all of the child views\n  // `_children` represents all child views\n  // `children` represents only views filtered to be shown\n  _initChildViewStorage() {\n    this._children = new ChildViewContainer();\n    this.children = new ChildViewContainer();\n  },\n\n  // Create an region to show the emptyView\n  getEmptyRegion() {\n    const $emptyEl = this.$container || this.$el;\n\n    if (this._emptyRegion && !this._emptyRegion.isDestroyed()) {\n      this._emptyRegion._setElement($emptyEl[0]);\n      return this._emptyRegion;\n    }\n\n    this._emptyRegion = new Region({ el: $emptyEl[0], replaceElement: false });\n\n    this._emptyRegion._parentView = this;\n\n    return this._emptyRegion;\n  },\n\n  // Configured the initial events that the collection view binds to.\n  _initialEvents() {\n    if (this._isRendered) { return; }\n\n    this.listenTo(this.collection, {\n      'sort': this._onCollectionSort,\n      'reset': this._onCollectionReset,\n      'update': this._onCollectionUpdate\n    });\n  },\n\n  // Internal method. This checks for any changes in the order of the collection.\n  // If the index of any view doesn't match, it will re-sort.\n  _onCollectionSort(collection, { add, merge, remove }) {\n    if (!this.sortWithCollection || this.viewComparator === false) {\n      return;\n    }\n\n    // If the data is changing we will handle the sort later in `_onCollectionUpdate`\n    if (add || remove || merge) {\n      return;\n    }\n\n    // If the only thing happening here is sorting, sort.\n    this.sort();\n  },\n\n  _onCollectionReset() {\n    this._destroyChildren();\n\n    this._addChildModels(this.collection.models);\n\n    this.sort();\n  },\n\n  // Handle collection update model additions and  removals\n  _onCollectionUpdate(collection, options) {\n    const changes = options.changes;\n\n    // Remove first since it'll be a shorter array lookup.\n    const removedViews = changes.removed.length && this._removeChildModels(changes.removed);\n\n    this._addedViews = changes.added.length && this._addChildModels(changes.added);\n\n    this._detachChildren(removedViews);\n\n    this.sort();\n\n    // Destroy removed child views after all of the render is complete\n    this._removeChildViews(removedViews);\n  },\n\n  _removeChildModels(models) {\n    return _.reduce(models, (views, model) => {\n      const removeView = this._removeChildModel(model);\n\n      if (removeView) { views.push(removeView); }\n\n      return views;\n    }, []);\n  },\n\n  _removeChildModel(model) {\n    const view = this._children.findByModel(model);\n\n    if (view) { this._removeChild(view); }\n\n    return view;\n  },\n\n  _removeChild(view) {\n    this.triggerMethod('before:remove:child', this, view);\n\n    this.children._remove(view);\n    this._children._remove(view);\n\n    this.triggerMethod('remove:child', this, view);\n  },\n\n  // Added views are returned for consistency with _removeChildModels\n  _addChildModels(models) {\n    return _.map(models, this._addChildModel.bind(this));\n  },\n\n  _addChildModel(model) {\n    const view = this._createChildView(model);\n\n    this._addChild(view);\n\n    return view;\n  },\n\n  _createChildView(model) {\n    const ChildView = this._getChildView(model);\n    const childViewOptions = this._getChildViewOptions(model);\n    const view = this.buildChildView(model, ChildView, childViewOptions);\n\n    return view;\n  },\n\n  _addChild(view, index) {\n    this.triggerMethod('before:add:child', this, view);\n\n    this._setupChildView(view);\n    this._children._add(view, index);\n    this.children._add(view, index);\n\n    this.triggerMethod('add:child', this, view);\n  },\n\n  // Retrieve the `childView` class\n  // The `childView` property can be either a view class or a function that\n  // returns a view class. If it is a function, it will receive the model that\n  // will be passed to the view instance (created from the returned view class)\n  _getChildView(child) {\n    let childView = this.childView;\n\n    if (!childView) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'A \"childView\" must be specified',\n        url: 'marionette.collectionview.html#collectionviews-childview'\n      });\n    }\n\n    childView = this._getView(childView, child);\n\n    if (!childView) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: '\"childView\" must be a view class or a function that returns a view class',\n        url: 'marionette.collectionview.html#collectionviews-childview'\n      });\n    }\n\n    return childView;\n  },\n\n  // First check if the `view` is a view class (the common case)\n  // Then check if it's a function (which we assume that returns a view class)\n  _getView(view, child) {\n    if (view.prototype instanceof Backbone.View || view === Backbone.View) {\n      return view;\n    } else if (_.isFunction(view)) {\n      return view.call(this, child);\n    }\n  },\n\n  _getChildViewOptions(child) {\n    if (_.isFunction(this.childViewOptions)) {\n      return this.childViewOptions(child);\n    }\n\n    return this.childViewOptions;\n  },\n\n  // Build a `childView` for a model in the collection.\n  // Override to customize the build\n  buildChildView(child, ChildViewClass, childViewOptions) {\n    const options = _.extend({model: child}, childViewOptions);\n    return new ChildViewClass(options);\n  },\n\n  _setupChildView(view) {\n    monitorViewEvents(view);\n\n    // We need to listen for if a view is destroyed in a way other\n    // than through the CollectionView.\n    // If this happens we need to remove the reference to the view\n    // since once a view has been destroyed we can not reuse it.\n    view.on('destroy', this.removeChildView, this);\n\n    // set up the child view event forwarding\n    this._proxyChildViewEvents(view);\n  },\n\n  // used by ViewMixin's `_childViewEventHandler`\n  _getImmediateChildren() {\n    return this.children._views;\n  },\n\n  // Overriding Backbone.View's `setElement` to handle\n  // if an el was previously defined. If so, the view might be\n  // attached on setElement.\n  setElement() {\n    Backbone.View.prototype.setElement.apply(this, arguments);\n\n    this._isAttached = this._isElAttached();\n\n    return this;\n  },\n\n  // Render children views.\n  render() {\n    if (this._isDestroyed) { return this; }\n    this.triggerMethod('before:render', this);\n\n    this._destroyChildren();\n\n    if (this.collection) {\n      this._addChildModels(this.collection.models);\n      this._initialEvents();\n    }\n\n    const template = this.getTemplate();\n\n    if (template) {\n      this._renderTemplate(template);\n      this.bindUIElements();\n    }\n    this._getChildViewContainer();\n    this.sort();\n\n    this._isRendered = true;\n\n    this.triggerMethod('render', this);\n    return this;\n  },\n\n  // Get a container within the template to add the children within\n  _getChildViewContainer() {\n    const childViewContainer = _.result(this, 'childViewContainer');\n    this.$container = childViewContainer ? this.$(childViewContainer) : this.$el;\n\n    if (!this.$container.length) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: `The specified \"childViewContainer\" was not found: ${childViewContainer}`,\n        url: 'marionette.collectionview.html#defining-the-childviewcontainer'\n      });\n    }\n  },\n\n  // Sorts the children then filters and renders the results.\n  sort() {\n    this._sortChildren();\n\n    this.filter();\n\n    return this;\n  },\n\n  // Sorts views by viewComparator and sets the children to the new order\n  _sortChildren() {\n    if (!this._children.length) { return; }\n\n    let viewComparator = this.getComparator();\n\n    if (!viewComparator) { return; }\n\n    // If children are sorted prevent added to end perf\n    delete this._addedViews;\n\n    this.triggerMethod('before:sort', this);\n\n    this._children._sort(viewComparator, this);\n\n    this.triggerMethod('sort', this);\n  },\n\n  // Sets the view's `viewComparator` and applies the sort if the view is ready.\n  // To prevent the render pass `{ preventRender: true }` as the 2nd argument.\n  setComparator(comparator, {preventRender} = {}) {\n    const comparatorChanged = this.viewComparator !== comparator;\n    const shouldSort = comparatorChanged && !preventRender;\n\n    this.viewComparator = comparator;\n\n    if (shouldSort) {\n      this.sort();\n    }\n\n    return this;\n  },\n\n  // Clears the `viewComparator` and follows the same rules for rendering as `setComparator`.\n  removeComparator(options) {\n    return this.setComparator(null, options);\n  },\n\n  // If viewComparator is overriden it will be returned here.\n  // Additionally override this function to provide custom\n  // viewComparator logic\n  getComparator() {\n    if (this.viewComparator) { return this.viewComparator }\n\n    if (!this.sortWithCollection || this.viewComparator === false || !this.collection) {\n      return false;\n    }\n\n    return this._viewComparator;\n  },\n\n  // Default internal view comparator that order the views by\n  // the order of the collection\n  _viewComparator(view) {\n    return this.collection.indexOf(view.model);\n  },\n\n  // This method filters the children views and renders the results\n  filter() {\n    if (this._isDestroyed) { return this; }\n\n    this._filterChildren();\n\n    this._renderChildren();\n\n    return this;\n  },\n\n  _filterChildren() {\n    if (!this._children.length) { return; }\n\n    const viewFilter = this._getFilter();\n\n    if (!viewFilter) {\n      const shouldReset = this.children.length !== this._children.length;\n\n      this.children._set(this._children._views, shouldReset);\n\n      return;\n    }\n\n    // If children are filtered prevent added to end perf\n    delete this._addedViews;\n\n    this.triggerMethod('before:filter', this);\n\n    const attachViews = [];\n    const detachViews = [];\n\n    _.each(this._children._views, (view, key, children) => {\n      (viewFilter.call(this, view, key, children) ? attachViews : detachViews).push(view);\n    });\n\n    this._detachChildren(detachViews);\n\n    // reset children\n    this.children._set(attachViews, true);\n\n    this.triggerMethod('filter', this, attachViews, detachViews);\n  },\n\n  // This method returns a function for the viewFilter\n  _getFilter() {\n    const viewFilter = this.getFilter();\n\n    if (!viewFilter) { return false; }\n\n    if (_.isFunction(viewFilter)) {\n      return viewFilter;\n    }\n\n    // Support filter predicates `{ fooFlag: true }`\n    if (_.isObject(viewFilter)) {\n      const matcher = _.matches(viewFilter);\n      return function(view) {\n        return matcher(view.model && view.model.attributes);\n      };\n    }\n\n    // Filter by model attribute\n    if (_.isString(viewFilter)) {\n      return function(view) {\n        return view.model && view.model.get(viewFilter);\n      };\n    }\n\n    throw new MarionetteError({\n      name: classErrorName,\n      message: '\"viewFilter\" must be a function, predicate object literal, a string indicating a model attribute, or falsy',\n      url: 'marionette.collectionview.html#defining-the-viewfilter'\n    });\n  },\n\n  // Override this function to provide custom\n  // viewFilter logic\n  getFilter() {\n    return this.viewFilter;\n  },\n\n  // Sets the view's `viewFilter` and applies the filter if the view is ready.\n  // To prevent the render pass `{ preventRender: true }` as the 2nd argument.\n  setFilter(filter, {preventRender} = {}) {\n    const filterChanged = this.viewFilter !== filter;\n    const shouldRender = filterChanged && !preventRender;\n\n    this.viewFilter = filter;\n\n    if (shouldRender) {\n      this.filter();\n    }\n\n    return this;\n  },\n\n  // Clears the `viewFilter` and follows the same rules for rendering as `setFilter`.\n  removeFilter(options) {\n    return this.setFilter(null, options);\n  },\n\n  _detachChildren(detachingViews) {\n    _.each(detachingViews, this._detachChildView.bind(this));\n  },\n\n  _detachChildView(view) {\n    const shouldTriggerDetach = view._isAttached && this.monitorViewEvents !== false;\n    if (shouldTriggerDetach) {\n      view.triggerMethod('before:detach', view);\n    }\n\n    this.detachHtml(view);\n\n    if (shouldTriggerDetach) {\n      view._isAttached = false;\n      view.triggerMethod('detach', view);\n    }\n\n    view._isShown = false;\n  },\n\n  // Override this method to change how the collectionView detaches a child view\n  detachHtml(view) {\n    this.Dom.detachEl(view.el, view.$el);\n  },\n\n  _renderChildren() {\n    // If there are unrendered views prevent add to end perf\n    if (this._hasUnrenderedViews) {\n      delete this._addedViews;\n      delete this._hasUnrenderedViews;\n    }\n\n    const views = this._addedViews || this.children._views;\n\n    this.triggerMethod('before:render:children', this, views);\n\n    if (this.isEmpty()) {\n      this._showEmptyView();\n    } else {\n      this._destroyEmptyView();\n\n      const els = this._getBuffer(views);\n\n      this._attachChildren(els, views);\n    }\n\n    delete this._addedViews;\n\n    this.triggerMethod('render:children', this, views);\n  },\n\n  // Renders each view and creates a fragment buffer from them\n  _getBuffer(views) {\n    const elBuffer = this.Dom.createBuffer();\n\n    _.each(views, view => {\n      renderView(view);\n      // corresponds that view is shown in a Region or CollectionView\n      view._isShown = true;\n      this.Dom.appendContents(elBuffer, view.el, {_$contents: view.$el});\n    });\n\n    return elBuffer;\n  },\n\n  _attachChildren(els, views) {\n    const shouldTriggerAttach = this._isAttached && this.monitorViewEvents !== false;\n\n    views = shouldTriggerAttach ? views : [];\n\n    _.each(views, view => {\n      if (view._isAttached) { return; }\n      view.triggerMethod('before:attach', view);\n    });\n\n    this.attachHtml(els, this.$container);\n\n    _.each(views, view => {\n      if (view._isAttached) { return; }\n      view._isAttached = true;\n      view.triggerMethod('attach', view);\n    });\n  },\n\n  // Override this method to do something other than `.append`.\n  // You can attach any HTML at this point including the els.\n  attachHtml(els, $container) {\n    this.Dom.appendContents($container[0], els, {_$el: $container});\n  },\n\n  isEmpty() {\n    return !this.children.length;\n  },\n\n  _showEmptyView() {\n    const EmptyView = this._getEmptyView();\n\n    if (!EmptyView) {\n      return;\n    }\n\n    const options = this._getEmptyViewOptions();\n\n    const emptyRegion = this.getEmptyRegion();\n\n    emptyRegion.show(new EmptyView(options));\n  },\n\n  // Retrieve the empty view class\n  _getEmptyView() {\n    const emptyView = this.emptyView;\n\n    if (!emptyView) { return; }\n\n    return this._getView(emptyView);\n  },\n\n  // Remove the emptyView\n  _destroyEmptyView() {\n    const emptyRegion = this.getEmptyRegion();\n    // Only empty if a view is show so the region\n    // doesn't detach any other unrelated HTML\n    if (emptyRegion.hasView()) {\n      emptyRegion.empty();\n    }\n  },\n\n  //\n  _getEmptyViewOptions() {\n    const emptyViewOptions = this.emptyViewOptions || this.childViewOptions;\n\n    if (_.isFunction(emptyViewOptions)) {\n      return emptyViewOptions.call(this);\n    }\n\n    return emptyViewOptions;\n  },\n\n  swapChildViews(view1, view2) {\n    if (!this._children.hasView(view1) || !this._children.hasView(view2)) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'Both views must be children of the collection view to swap.',\n        url: 'marionette.collectionview.html#swapping-child-views'\n      });\n    }\n\n    this._children._swap(view1, view2);\n    this.Dom.swapEl(view1.el, view2.el);\n\n    // If the views are not filtered the same, refilter\n    if (this.children.hasView(view1) !== this.children.hasView(view2)) {\n      this.filter();\n    } else {\n      this.children._swap(view1, view2);\n    }\n\n    return this;\n  },\n\n  // Render the child's view and add it to the HTML for the collection view at a given index, based on the current sort\n  addChildView(view, index, options = {}) {\n    if (!view || view._isDestroyed) {\n      return view;\n    }\n\n    if (view._isShown) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'View is already shown in a Region or CollectionView',\n        url: 'marionette.region.html#showing-a-view'\n      });\n    }\n\n    if (_.isObject(index)) {\n      options = index;\n    }\n\n    // If options has defined index we should use it\n    if (options.index != null) {\n      index = options.index;\n    }\n\n    if (!this._isRendered) {\n      this.render();\n    }\n\n    this._addChild(view, index);\n\n    if (options.preventRender) {\n      this._hasUnrenderedViews = true;\n      return view;\n    }\n\n    const hasIndex = (typeof index !== 'undefined');\n    const isAddedToEnd = !hasIndex || index >= this._children.length;\n\n    // Only cache views if added to the end and there is no unrendered views\n    if (isAddedToEnd && !this._hasUnrenderedViews) {\n      this._addedViews = [view];\n    }\n\n    if (hasIndex) {\n      this._renderChildren();\n    } else {\n      this.sort();\n    }\n\n    return view;\n  },\n\n  // Detach a view from the children.  Best used when adding a\n  // childView from `addChildView`\n  detachChildView(view) {\n    this.removeChildView(view, { shouldDetach: true });\n\n    return view;\n  },\n\n  // Remove the child view and destroy it.  Best used when adding a\n  // childView from `addChildView`\n  // The options argument is for internal use only\n  removeChildView(view, options) {\n    if (!view) {\n      return view;\n    }\n\n    this._removeChildView(view, options);\n\n    this._removeChild(view);\n\n    if (this.isEmpty()) {\n      this._showEmptyView();\n    }\n\n    return view;\n  },\n\n  _removeChildViews(views) {\n    _.each(views, this._removeChildView.bind(this));\n  },\n\n  _removeChildView(view, {shouldDetach} = {}) {\n    view.off('destroy', this.removeChildView, this);\n\n    if (shouldDetach) {\n      this._detachChildView(view);\n    } else {\n      this._destroyChildView(view);\n    }\n\n    this.stopListening(view);\n  },\n\n  _destroyChildView(view) {\n    if (view._isDestroyed) {\n      return;\n    }\n\n    const shouldDisableEvents = this.monitorViewEvents === false;\n    destroyView(view, shouldDisableEvents);\n  },\n\n  // called by ViewMixin destroy\n  _removeChildren() {\n    this._destroyChildren();\n    const emptyRegion = this.getEmptyRegion();\n    emptyRegion.destroy();\n    delete this._addedViews;\n  },\n\n  // Destroy the child views that this collection view is holding on to, if any\n  _destroyChildren() {\n    if (!this._children.length) {\n      return;\n    }\n\n    this.triggerMethod('before:destroy:children', this);\n    if (this.monitorViewEvents === false) {\n      this.Dom.detachContents(this.el, this.$el);\n    }\n\n    this._removeChildViews(this._children._views);\n\n    // After all children have been destroyed re-init the container\n    this._children._init();\n    this.children._init();\n\n    this.triggerMethod('destroy:children', this);\n  }\n}, {\n  setDomApi,\n  setRenderer\n});\n\n_.extend(CollectionView.prototype, ViewMixin);\n\nexport default CollectionView;\n","// Behavior\n// --------\n\n// A Behavior is an isolated set of DOM /\n// user interactions that can be mixed into any View.\n// Behaviors allow you to blackbox View specific interactions\n// into portable logical chunks, keeping your views simple and your code DRY.\n\nimport _ from 'underscore';\nimport extend from './utils/extend';\nimport getNamespacedEventName from './utils/get-namespaced-event-name';\nimport CommonMixin from './mixins/common';\nimport DelegateEntityEventsMixin from './mixins/delegate-entity-events';\nimport TriggersMixin from './mixins/triggers';\nimport UIMixin from './mixins/ui';\n\nconst ClassOptions = [\n  'collectionEvents',\n  'events',\n  'modelEvents',\n  'triggers',\n  'ui'\n];\n\nconst Behavior = function(options, view) {\n  // Setup reference to the view.\n  // this comes in handle when a behavior\n  // wants to directly talk up the chain\n  // to the view.\n  this.view = view;\n\n  this._setOptions(options, ClassOptions);\n  this.cid = _.uniqueId(this.cidPrefix);\n\n  // Construct an internal UI hash using the behaviors UI\n  // hash combined and overridden by the view UI hash.\n  // This allows the user to use UI hash elements defined\n  // in the parent view as well as those defined in the behavior.\n  // This order will help the reuse and share of a behavior\n  // between multiple views, while letting a view override\n  // a selector under an UI key.\n  this.ui = _.extend({}, _.result(this, 'ui'), _.result(view, 'ui'));\n\n  // Proxy view triggers\n  this.listenTo(view, 'all', this.triggerMethod);\n\n  this.initialize.apply(this, arguments);\n};\n\nBehavior.extend = extend;\n\n// Behavior Methods\n// --------------\n\n_.extend(Behavior.prototype, CommonMixin, DelegateEntityEventsMixin, TriggersMixin, UIMixin, {\n  cidPrefix: 'mnb',\n\n  // This is a noop method intended to be overridden\n  initialize() {},\n\n  // proxy behavior $ method to the view\n  // this is useful for doing jquery DOM lookups\n  // scoped to behaviors view.\n  $() {\n    return this.view.$.apply(this.view, arguments);\n  },\n\n  // Stops the behavior from listening to events.\n  destroy() {\n    this.stopListening();\n\n    this.view._removeBehavior(this);\n\n    this._deleteEntityEventHandlers();\n\n    return this;\n  },\n\n  proxyViewProperties() {\n    this.$el = this.view.$el;\n    this.el = this.view.el;\n\n    return this;\n  },\n\n  bindUIElements() {\n    this._bindUIElements();\n\n    return this;\n  },\n\n  unbindUIElements() {\n    this._unbindUIElements();\n\n    return this;\n  },\n\n  getUI(name) {\n    return this._getUI(name);\n  },\n\n  // Handle `modelEvents`, and `collectionEvents` configuration\n  delegateEntityEvents() {\n    this._delegateEntityEvents(this.view.model, this.view.collection);\n\n    return this;\n  },\n\n  undelegateEntityEvents() {\n    this._undelegateEntityEvents(this.view.model, this.view.collection);\n\n    return this;\n  },\n\n  _getEvents() {\n    if (!this.events) { return; }\n\n    // Normalize behavior events hash to allow\n    // a user to use the @ui. syntax.\n    const behaviorEvents = this.normalizeUIKeys(_.result(this, 'events'));\n\n    // binds the handler to the behavior and builds a unique eventName\n    return _.reduce(behaviorEvents, (events, behaviorHandler, key) => {\n      if (!_.isFunction(behaviorHandler)) {\n        behaviorHandler = this[behaviorHandler];\n      }\n      if (!behaviorHandler) { return events; }\n      key = getNamespacedEventName(key, this.cid);\n      events[key] = behaviorHandler.bind(this);\n      return events;\n    }, {});\n  },\n\n  // Internal method to build all trigger handlers for a given behavior\n  _getTriggers() {\n    if (!this.triggers) { return; }\n\n    // Normalize behavior triggers hash to allow\n    // a user to use the @ui. syntax.\n    const behaviorTriggers = this.normalizeUIKeys(_.result(this, 'triggers'));\n\n    return this._getViewTriggers(this.view, behaviorTriggers);\n  }\n});\n\nexport default Behavior;\n","// Application\n// -----------\n\nimport _ from 'underscore';\nimport extend from './utils/extend';\nimport buildRegion from './common/build-region';\nimport CommonMixin from './mixins/common';\nimport DestroyMixin from './mixins/destroy';\nimport RadioMixin from './mixins/radio';\nimport Region from './region';\n\nconst ClassOptions = [\n  'channelName',\n  'radioEvents',\n  'radioRequests',\n  'region',\n  'regionClass'\n];\n\nconst Application = function(options) {\n  this._setOptions(options, ClassOptions);\n  this.cid = _.uniqueId(this.cidPrefix);\n  this._initRegion();\n  this._initRadio();\n  this.initialize.apply(this, arguments);\n};\n\nApplication.extend = extend;\n\n// Application Methods\n// --------------\n\n_.extend(Application.prototype, CommonMixin, DestroyMixin, RadioMixin, {\n  cidPrefix: 'mna',\n\n  // This is a noop method intended to be overridden\n  initialize() {},\n\n  // Kick off all of the application's processes.\n  start(options) {\n    this.triggerMethod('before:start', this, options);\n    this.triggerMethod('start', this, options);\n    return this;\n  },\n\n  regionClass: Region,\n\n  _initRegion() {\n    const region = this.region;\n\n    if (!region) { return; }\n\n    const defaults = {\n      regionClass: this.regionClass\n    };\n\n    this._region = buildRegion(region, defaults);\n  },\n\n  getRegion() {\n    return this._region;\n  },\n\n  showView(view, ...args) {\n    const region = this.getRegion();\n    region.show(view, ...args);\n    return view;\n  },\n\n  getView() {\n    return this.getRegion().currentView;\n  }\n});\n\nexport default Application;\n","import {version as VERSION} from '../package.json';\n\nimport proxy from './utils/proxy';\nimport extend from './utils/extend';\n\nimport {\n  bindEvents as _bindEvents,\n  unbindEvents as _unbindEvents\n} from './common/bind-events';\nimport {\n  bindRequests as _bindRequests,\n  unbindRequests as _unbindRequests\n} from './common/bind-requests';\nimport _getOption from './common/get-option';\nimport _mergeOptions from './common/merge-options';\nimport monitorViewEvents from './common/monitor-view-events';\nimport _normalizeMethods from './common/normalize-methods';\nimport _triggerMethod from './common/trigger-method';\n\nimport Events from './mixins/events';\n\nimport MnObject from './object';\nimport View from './view';\nimport CollectionView from './collection-view';\nimport Behavior from './behavior';\nimport Region from './region';\nimport Application from './application';\n\nimport DomApi from './config/dom';\n\nimport {\n  isEnabled,\n  setEnabled\n} from './config/features';\n\n// Utilities\n\nexport const bindEvents = proxy(_bindEvents);\nexport const unbindEvents = proxy(_unbindEvents);\nexport const bindRequests = proxy(_bindRequests);\nexport const unbindRequests = proxy(_unbindRequests);\nexport const mergeOptions = proxy(_mergeOptions);\nexport const getOption = proxy(_getOption);\nexport const normalizeMethods = proxy(_normalizeMethods);\nexport const triggerMethod = proxy(_triggerMethod);\n\n\n// Configuration\n\nexport const setDomApi = function(mixin) {\n  CollectionView.setDomApi(mixin);\n  Region.setDomApi(mixin);\n  View.setDomApi(mixin);\n};\nexport const setRenderer = function(renderer) {\n  CollectionView.setRenderer(renderer);\n  View.setRenderer(renderer);\n};\n\nexport {\n  View,\n  CollectionView,\n  MnObject,\n  Region,\n  Behavior,\n  Application,\n  isEnabled,\n  setEnabled,\n  monitorViewEvents,\n  Events,\n  extend,\n  DomApi,\n  VERSION\n};\n\nexport default {\n  View,\n  CollectionView,\n  MnObject,\n  Object: MnObject,\n  Region,\n  Behavior,\n  Application,\n  isEnabled,\n  setEnabled,\n  monitorViewEvents,\n  Events,\n  extend,\n  DomApi,\n  VERSION\n};\n"],"names":["proxy","method","context","args","apply","extend","Backbone","Model","normalizeMethods","hash","_","reduce","normalizedHash","name","isFunction","errorProps","MarionetteError","call","Error","urlRoot","version","url","constructor","options","error","message","pick","captureStackTrace","toString","normalizeBindings","bindings","isObject","bindEvents","entity","listenTo","unbindEvents","stopListening","bindRequests","channel","reply","unbindRequests","stopReplying","getOption","optionName","undefined","mergeOptions","keys","each","key","option","triggerMethodChildren","view","event","shouldTrigger","_getImmediateChildren","child","triggerMethod","shouldTriggerAttach","_isAttached","shouldAttach","shouldTriggerDetach","shouldDetach","triggerDOMRefresh","_isRendered","triggerDOMRemove","handleBeforeAttach","handleAttach","handleBeforeDetach","handleDetach","handleBeforeRender","handleRender","monitorViewEvents","_areViewEventsMonitored","on","splitter","methodCache","getEventName","match","prefix","eventName","toUpperCase","getOnMethodName","replace","methodName","result","drop","arguments","trigger","CommonMixin","_setOptions","classOptions","Events","_isDestroyed","isDestroyed","destroy","_initRadio","channelName","Radio","_channel","radioEvents","radioRequests","_destroyRadio","getChannel","ClassOptions","MarionetteObject","cid","uniqueId","cidPrefix","initialize","prototype","DestroyMixin","RadioMixin","invokeMap","invoke","getBehaviorClass","behaviorClass","BehaviorClass","parseBehaviors","behaviors","allBehaviors","reducedBehaviors","behaviorDefiniton","behavior","push","_initBehaviors","_behaviors","_getBehaviorTriggers","triggers","_invoke","memo","_triggers","_getBehaviorEvents","events","_events","_proxyBehaviorViewProperties","_delegateBehaviorEntityEvents","_undelegateBehaviorEntityEvents","_destroyBehaviors","_removeBehavior","undelegate","without","_bindBehaviorUIElements","_unbindBehaviorUIElements","_triggerEventOnBehaviors","_delegateEntityEvents","model","collection","_modelEvents","_collectionEvents","_undelegateEntityEvents","_deleteEntityEventHandlers","_renderTemplate","template","data","mixinTemplateContext","serializeData","html","_renderHtml","attachElContent","getTemplate","serializedData","templateContext","serializeModel","items","serializeCollection","attributes","map","models","Dom","setContents","el","$el","delegateEventSplitter","getNamespacedEventName","namespace","FEATURES","childViewEventPrefix","triggersStopPropagation","triggersPreventDefault","DEV_MODE","isEnabled","setEnabled","state","buildViewTrigger","triggerDef","isString","shouldPreventDefault","preventDefault","shouldStopPropagation","stopPropagation","_getViewTriggers","value","normalizeUIKeys","ui","val","normalizedKey","normalizeUIString","uiRegEx","uiString","r","slice","normalizeUIValues","property","propertyVal","uiBindings","_getUIBindings","_bindUIElements","_uiBindings","_ui","selector","$","_unbindUIElements","_getUI","getEl","setDomApi","mixin","createBuffer","document","createDocumentFragment","getDocumentEl","ownerDocument","documentElement","findEl","find","hasEl","childEl","contains","parentNode","detachEl","_$el","detach","replaceEl","newEl","oldEl","parent","replaceChild","swapEl","el1","el2","parent1","parent2","next1","nextSibling","next2","insertBefore","appendContents","contents","_$contents","append","hasContents","hasChildNodes","detachContents","ViewMixin","DomApi","_isElAttached","supportsRenderLifecycle","supportsDestroyLifecycle","isRendered","isAttached","delegateEvents","_buildEventProxies","combinedEvents","_getEvents","_getTriggers","View","delegateEntityEvents","undelegateEntityEvents","_isDestroying","_disableDetachEvents","unbindUIElements","_removeElement","_removeChildren","off","removeData","bindUIElements","getUI","_childViewEvents","_childViewTriggers","_eventPrefix","_getEventPrefix","defaultPrefix","_proxyChildViewEvents","_childViewEventHandler","childViewEvents","childViewTriggers","BehaviorsMixin","DelegateEntityEventsMixin","TemplateRenderMixin","TriggersMixin","UIMixin","renderView","render","destroyView","disableDetachEvents","remove","classErrorName","Region","_initEl","_getEl","replaceElement","_isReplaced","_isSwappingView","show","_ensureElement","_getView","currentView","_isShown","empty","_setupChildView","_attachView","_setEl","length","_setElement","shouldReplace","_restoreEl","_replaceEl","attachHtml","_empty","parentView","_parentView","_shouldDisableMonitoring","shouldReplaceEl","allowMissingEl","viewOptions","_getViewOptions","_detachView","isReplaced","isSwappingView","detachHtml","shouldDestroy","removeView","_stopChildViewEvents","detachView","shouldRestoreEl","hasView","reset","_name","_removeReferences","definition","defaults","buildRegionFromObject","regionClass","RegionClass","_initRegions","regions","_regions","addRegions","_reInitRegions","addRegion","isEmpty","_addRegions","regionDefinitions","parentEl","partial","buildRegion","_addRegion","region","removeRegion","_removeRegion","removeRegions","_getRegions","bind","emptyRegions","getRegions","hasRegion","getRegion","clone","showChildView","detachChildView","getChildView","setRenderer","renderer","childReducer","children","setElement","RegionsMixin","Container","_init","methods","_views","concat","stringComparator","comparator","get","_viewsByCid","_indexByModel","_updateLength","_add","index","_addViewIndexes","splice","_sort","_sortBy","sort","sortedViews","sortBy","_set","views","shouldReset","_swap","view1","view2","view1Index","findIndexByView","view2Index","swapView","findByModel","findByModelCid","modelCid","findByIndex","indexOf","findByCid","_remove","CollectionView","sortWithCollection","_initChildViewStorage","getEmptyRegion","_children","ChildViewContainer","$emptyEl","$container","_emptyRegion","_initialEvents","_onCollectionSort","_onCollectionReset","_onCollectionUpdate","add","merge","viewComparator","_destroyChildren","_addChildModels","changes","removedViews","removed","_removeChildModels","_addedViews","added","_detachChildren","_removeChildViews","_removeChildModel","_removeChild","_addChildModel","_createChildView","_addChild","ChildView","_getChildView","childViewOptions","_getChildViewOptions","buildChildView","childView","ChildViewClass","removeChildView","_getChildViewContainer","childViewContainer","_sortChildren","filter","getComparator","setComparator","preventRender","comparatorChanged","shouldSort","removeComparator","_viewComparator","_filterChildren","_renderChildren","viewFilter","_getFilter","attachViews","detachViews","getFilter","matcher","matches","setFilter","filterChanged","shouldRender","removeFilter","detachingViews","_detachChildView","_hasUnrenderedViews","_showEmptyView","_destroyEmptyView","els","_getBuffer","_attachChildren","elBuffer","EmptyView","_getEmptyView","_getEmptyViewOptions","emptyRegion","emptyView","emptyViewOptions","swapChildViews","addChildView","hasIndex","isAddedToEnd","_removeChildView","_destroyChildView","shouldDisableEvents","Behavior","proxyViewProperties","behaviorEvents","behaviorHandler","behaviorTriggers","Application","_initRegion","start","_region","showView","getView","_bindEvents","_unbindEvents","_bindRequests","_unbindRequests","_mergeOptions","_getOption","_normalizeMethods","_triggerMethod","MnObject","Object","VERSION"],"mappings":"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"}